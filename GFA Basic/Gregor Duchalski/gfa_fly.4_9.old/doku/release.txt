---------------------------------------------------------------------------
- 'Fliegende Dialoge' in GFA-BASIC 3.x                                    -
- (c)1992-1994 Gregor Duchalski                                           -
-                                                                         -
- Version 4.x, History                                                    -
---------------------------------------------------------------------------

Ver.    Datum      ('*' = Version wurde verîffentlicht)

4.0   * 01.03.93   -Erste îffentliche Version der neuen Routinen.

        02.03.93   -EXIT-Buttons wurden in der Breite einen Pixel zu groû
                    gezeichnet.
                   -Bei Check-und Radiobuttons wird der Text jetzt nur noch
                    ausgegeben, wenn es wirklich nîtig ist. Das verhindert
                    lÑstiges Flackern und Probleme mit dem Cursor in einem
                    darunterbefindlichen Eingabefeld.

      * 06.03.93   -Die Fensterdialoge kînnen unter MTOS nun nicht mehr bedient
                    werden, wenn sie im Hintergrund liegen und mit der rechten
                    Maustaste angeklickt werden. (Gefunden von Mike Steffl)
                   -Circle-Buttons kînnen nun auch per Tastatur mit SHIFT+
                    ALTERNATE+Buchstabe bedient werden. (Abgeguckt von den 
                    Flydials)

        07.03.93   -Ein disableter Exit-Button wurde in einer Pixelreihe falsch
                    gezeichnet. (Gefunden von Michael Heng)

        15.03.93   -'Pling' beim Anklicken eines Fensters im Hintergrund eines
                    Fensterdialoges, sofern die jeweilige Aktion nicht ausfÅhr-
                    bar ist (z.B. Schlieûfeld).

        19.03.93   -SHIFT+ALTERNATE+<Taste> zur Bedienung eines Circlebuttons
                    funktionierte bei den Fensterdialogen nicht. (Gefunden von
                    Michael Heng)
                   -Zahlen lieûen sich nicht als Shortcuts in Dialogen
                    verwenden. (Michael Heng again :-)
                   -Bei einem nicht-Fenster-Dialog werden jetzt keine Message-
                    Ereignisse in 'rsc_do' mehr abgefragt bzw. durchgelassen.
                    Dies konnte z.B. zu Redraw-Problemen in Zusammenhang mit der
                    Dateiauswahlbox fÅhren. (Gefunden von Arne Schween).

        20.03.93   -Bei den Fensterdialogen gab es Situationen, in denen der
                    Cursor verschwinden konnte. Das mÅûte jetzt behoben sein.

      * 22.03.93   -Ach Du Schande: Bei den Fensterdialogen wurde in 'rsc_draw'
                    bei WIND_CREATE fÅr die Hîhe 'deshk&' verwendet, richtig
                    ist natÅrlich 'deskh&'. Warum das nie Probleme gab ist mir
                    schleierhaft...

4.5   * 09.06.93   -Assembler-INLINE Åberarbeitet, 3D-Routinen eingebaut!
                    Sofern die entsprechenden Flags gesetzt sind, erscheinen die
                    Dialoge unter MultiTOS (und nur dort) im 3D-Look. NÑheres
                    dazu siehe im geÑnderten GFA_FLY4.TXT, '3D-Darstellung'.    

                   -Die erweiterten Routinen enthalten jetzt fliegende ALERT-
                    Boxen. Zu diesem Zweck muûte die Funktion 'rsc_laden' er-
                    weitert werden, sie bekommt nun noch die Nummer des Alert-
                    Dialoges Åbergeben. NÑheres steht im aktualisierten
                    'GFA_FLYD.TXT'.

                   -Die Routinen wurden unter dem Gesichtspunkt 'Verwendung in
                    einem ACC' Åberarbeitet. Dazu gehîrt z.B., daû bei den 
                    Fensterdialogen in 'rsc_back' jetzt zusÑtzlich ÅberprÅft
                    wird, ob das Fenster noch geîffnet ist und es nur dann
                    geschlossen wird. NÑheres steht im Abschnitt 'Verwendung 
                    in Accessories' im GFA_FLYD.TXT.

                   -Es wird jetzt eine Liste der gleichzeitig (Åbereinander)
                    geîffneten Dialoge mitgefÅhrt. Damit dÅrften VerstÅmmelungen
                    und Redraw-Probleme in diesen FÑllen Vergangenheit sein.

                   -Der rsc_bitblt%-Routine bekommt jetzt auch den Schreibmodus
                    Åbergeben, damit ist sie endlich universell einsetzbar.

                   -In Fensterdialogen waren Popups nicht Åber den Tastatur-
                    Shortcut des voranstehenden Strings aufrufbar.

                   -Zahlen wurden als Tasten-Shortcuts nicht erkannt. öbel,
                    dabei hatte ich das irgendwann mal eingebaut...

                   -Die Prozedur 'message_auswerten' bei den Fensterdialogen 
                    muû nun den gesamten AES-Message-Puffer Åbergeben bekommen.

                   -'rsc_do' bekommt jetzt wie die Original-FORM_DO zusÑtzlich
                    das Objekt Åbergeben, in dem der Textcursor zu Beginn
                    stehen soll.

                   -Die Userblks werden nicht mehr in einem Integer-Feld, son-
                    dern in einem geMALLOCten Bereich abgelegt. In seltenen
                    FÑllen konnte es sonst zu Problemen kommen. Damit verbunden
                    ist 'rsc_walk_tree' jetzt als Funktion definiert.

                   -Der Assembler-INLINE enthÑlt jetzt eine Routine, die einen
                    Cookie sucht und im Erfolgsfalle dessen Wert zurÅckliefert.
                    NÑheres unter 'Goodies...' im GFA_FLYD.TXT.

         18.06.93  -Die Hintergrundrestaurierung in 'rsc_back' etwas abgeÑndert,
                    jetzt bleiben in keinem Fall unschîne Dialog-Reste zurÅck.

         27.06.93  -Die Parameter-Reihenfolge bei 'rsc_popup' war bei den Fen-
                    sterdialogen vertauscht. Viel nur auf, wenn man beide
                    Versionen mischte.

         01.07.93  -Und nur bei den Fensterdialogen wurde in 'rsc_popup' 
                    WIND_UPDATE() gesetzt. Prinzipiell OK, konnte allerdings
                    ebenfalls beim Mischen problematisch werden.

       * 05.07.93  -Bîse: Zweimal wurde auf die Variable 'rsc_userblk%()' zuge-
                    griffen, die es aber gar nicht mehr gibt. Einen Fehler gab
                    es zum GlÅck nur, wenn kein Dialogtitel existierte.

                   -In einigen Programmteilen wurden Variablen nicht lokal de-
                    finiert, obwohl sie verwendet wurden. Diese und auch die
                    umgekehrten FÑlle sollten jetzt behoben sein.

4.6      28.07.93  -énderung im Aufruf von 'rsc_draw': 'window!' wird durch
                    ein Bitflag ersetzt, mit dem mehr Optionen realisiert
                    werden kînnen. Bisher belegt:
                    Bit 0 -> Fensterdialog
                    Bit 1 -> Schlieûfeld
                    Weitere Bits sind reserviert. Ihr mÅût leider Eure Aufrufe
                    entsprechend anpassen.

                   -Objekte kînnen jetzt auch Åber die Funktionstasten bedient
                    werden. Zur Festlegung werde die Bits 12-15 von OB_FLAGS
                    benutzt, nÑheres im GFA_FLYD.TXT. In diesem Zusammenhang
                    gehîrt jetzt auch INTRFACE.RSC zum Lieferumfang. Es ent-
                    hÑlt den angepaûten EXTFLAGS-Dialogbaum.

         02.08.93  -Rahmen wurden unter MultiTOS immer in der 3D-Farbe gezeich-
                    net, unabhÑngig von der Einstellung der 3D-Flags.

       * 15.08.93  -Fehler in 'rsc_popup' behoben, der deselektierte EintrÑge
                    u.U. unmotiviert wÑhlbar machte.

                   -Wird kein Popup-Eintrag ausgewÑhlt (Klick daneben, <UNDO>),
                    so wird 'rsc_do' auch nicht mehr verlassen.

                   -'rsc_movedial' muûte leider um 2 weitere Parameter erwei-
                    tert werden, um einen Bug in der SOLID-Routine sauber be-
                    heben zu kînnen.

                   -Wenn eine Resource ALERT- oder FREE-BÑume enthielt, kam
                    'rsc_laden' nicht ohne Anpassung damit klar. Nun befinden
                    sich entsprechende Zeilen als REMarks im Listing. NÑheres
                    steht im GFA_FLY4.TXT unter 'rsc_laden'.

                   -Die 3D-Effekte werden nur noch bei einer 3D-Farbe<>0 
                    aktiviert. Z.B. unter ST-Mid sahen einige Objekte sonst 
                    sehr merkwÅrdig aus.

         19.09.93  -Unkorrekte GEMSYS-Aufrufe von APPL_GETINFO und OBJC_SYSVAR
                    korrigiert.

         22.09.93  -Sogn. 'Geisterdials' implementiert: Wird die Flydial-Ecke
                    mit gedrÅckter Zusatztaste (SHIFT, ALT, CONTROL) oder der
                    rechten Maustaste angeklickt, wird der Dialog zunÑchst
                    entfernt und nur ein Rahmen verschoben. Somit kann man 
                    besser sehen, was hinter dem Dialog ist.

                   -'rsc_init', 'rsc_laden' und 'rsc_walktree' intern etwas
                    umstrukturiert. Die wichtigsten Parameter werden jetzt
                    alle in 'rsc_init' ermittelt, dadurch kann z.B. die 
                    Cookie-Routine auch vor dem Laden der eigentlichen 
                    Resource benutzt werden. 'rsc_walktree' erhÑlt nun einen
                    Parameter weniger Åbergeben.

       * 25.09.93  -Probleme mit MAG!X und den 3D-Objekten behoben.

         02.10.93  -Der Versuch, ein anderes Fenster zu toppen obwohl ein Fen-
                    sterdialog geîffnet ist, fÅhrt nun zum Toppen dieses Dialo-
                    ges.

         09.10.93  -Statt generellen Tests auf MultiTOS (alte Variable 'mtos!')
                    wird jetzt gezielt die AES-Version (neue Variable
                    'rsc_aes&') oder die Multitasking-FÑhigkeit (neue Variable
                    'rsc_mtsk!') zur Entscheidung herangezogen.

                   -Vorhandensein der 3D-Objekte wird jetzt nicht mehr an der
                    AES-Version >=3.34, sondern an >=3.40 festgemacht.

4.7û     19.11.93  -Beim Aufruf eines Popups Åber die Tastatur ist jetzt immer
                    ein Eintrag selektiert, auch wenn der Mauszeiger auûerhalb
                    des MenÅs steht.

         09.01.94  -In 'rsc_exit' wurde vergessen, auch 'rsc_userblk%' wieder
                    mit MFREE() freizugeben. Das ist allerdings auch nur im
                    Interpreter nîtig.

         15.01.94  -Der 'Ping' wird jetzt mit ~BIOS(3,2,7) erzeugt, da das um
                    einiges kÅrzer als OUT 2,7 ist.

                   -In den Fensterroutinen fehlten die Geisterdials.

         18.01.94  -'rsc_popup' kann jetzt auch zum Aufrufen eines Popups _ohne_
                    darunterliegendem Dialog benutzt werden. Dazu ist 'button&'
                    auf 0 zu setzen. Bsp.: ~@rsc_popup(FALSE,0,0,pop_fkt|,1)

         19.01.94  -'rsc_walk_tree' Åberarbeitet: a$ war zuviel, die Button-
                    Behandlung, insbesondere die von Checkboxen, wurde leicht
                    geÑndert.

                   -Checkboxen kînnen jetzt einen dritten Status neben "ange-
                    kreuzt" / "nicht angekreuzt" haben: Wenn das Flag CHECKED
                    gesetzt ist, aber nicht SELECTED, wird die Checkbox mit
                    einem Punktmuster gefÅllt ("Tristate-Button"). Zur Verwal-
                    tung dient die Prozedur 'rsc_tristate' aus EXTENDED.LST.
                    Das Objekt darf nicht SELECTABLE sein, aber TOUCHEXIT.

         23.01.94  -Wird 'rsc_laden' als Anzahl der ObjektbÑume -1 Åbergeben,
                    so werden die Daten automatisch ermittelt.

                   -Der 3D-Effekt bei Buttons sah etwas merkwÅrdig aus. Ich
                    weiû nicht mehr, bei welcher Version das verhunzt wurde,
                    jetzt ist es jedenfalls wieder in Ordnung.

                   -Bei normalen Dialogen wird jetzt ein fÅhrendes Space im
                    Titel Åbersprungen. Vorteil: Der Titel eines Fensterdialoges
                    kann links und rechts jeweils ein Leerzeichen haben, was
                    einfach schîner aussieht.

         06.02.94  -Neues Flag bei 'rsc_draw': Ist Bit 2 gesetzt, wird ein
                    Fensterdialog sofort beim Aufruf gezeichnet, ansonsten wie
                    gehabt erst bei 'rsc_do'.

4.7    * 12.02.94  -'rsc_exit' umgestellt, kleinere Bugs behoben.

4.8      22.02.94  -Leider kam um ich um die EinfÅhrung einer eigenen Cursor-
                    Setz-Prozedur ('rsc_cursor()') nicht herum. DafÅr sind
                    jetzt einige Probleme mit dem Eingabezeiger (z.B. bei den
                    Geisterdials) behoben. 'rsc_movedial' benutzt diese
                    Prozedur.

                   -Der Unterstrich bei Dialogtiteln wird jetzt einen Pixel
                    tiefer gezeichnet.

       * 28.02.94  -'rsc_movedial': Das Setzen des Cursors wird unterlassen,
                    wenn es kein editierbares Objekt gibt.

4.9      23.05.94  -Die Freigabe von 'rsc_userblk%' in 'rsc_exit' klappte
                    nicht (Frank RÅger).

                   -Bei allen OBJC_DRAWs wird jetzt 7 als max. Tiefe
                    gesetzt.

                   -Radiobuttons etwas verkleinert, einigen Leuten waren
                    sie zu groû.

                   -OBJC_CHANGE() in 'rsc_popup' korrigiert, setzte immer 1
                    als OB_STATE und Åberschrieb damit alle anderen Bits
                    (David Reitter).

                   -Test auf APPL_GETINFO() ÅberprÅft zusÑtzliche das Vor-
                    handensein der Pseudo-Applikation "?API" (Frank RÅger).

         01.06.94  -'Dialog sofort zeichnen'-Modus bei 'rsc_draw' war nicht
                    korrekt implementiert.

       * 02.06.94  -'-1' fÅr die Anzahl der BÑume in 'rsc_laden' nicht
                    mehr zulÑssig. Gab zuviele Probleme...

---------------------------------------------------------------------------
