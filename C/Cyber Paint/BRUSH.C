
#include "flicker.h"

extern char gemctable[];
extern char *aline;	/* aline pointer ... might as well be a char I guess */

WORD use_cursor0 = 1;

WORD preshift1[16*32], preshift2[16*32];	/* places for preshifted brushes */

WORD diamond_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0080,
		0x01C0, 0x0080, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD startr_cursor[16] = {
		0x0000>>1, 0x0000>>1, 0x0000>>1, 0x0000>>1, 
		0x0000>>1, 0x0000>>1, 0x07C0>>1, 0x0380>>1,
		0x0100>>1, 0x0380>>1, 0x07C0>>1, 0x0000>>1, 
		0x0000>>1, 0x0000>>1, 0x0000>>1, 0x0000>>1,
		};

WORD endr_cursor[16] = {
		0x0000>>1, 0x0000>>1, 0x0000>>1, 0x0000>>1, 
		0x0000>>1, 0x0000>>1, 0x0100>>1, 0x0380>>1,
		0x07C0>>1, 0x0380>>1, 0x0100>>1, 0x0000>>1, 
		0x0000>>1, 0x0000>>1, 0x0000>>1, 0x0000>>1,
		};

WORD default2_cursor[16] = {
		0x0000, 0x03E0, 0x0220, 0x0220, 0x0220, 0x0220, 0x7E3F, 0x4001,
		0x4001, 0x4001, 0x7E3F, 0x0220, 0x0220, 0x0220, 0x0220, 0x03E0,
		};

WORD default_cursor[16] = {
		0x0000, 0x0000, 0x01C0, 0x0140, 0x0140, 0x0140, 0x0140, 0x3F7E,
		0x2002, 0x3F7E, 0x0140, 0x0140, 0x0140, 0x0140, 0x01C0, 0x0000,
		};

WORD spray1_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0080, 0x0220, 0x0888, 0x2222, 0x0888, 
		0x2222, 0x0888, 0x2222, 0x0888, 0x0220, 0x0080, 0x0000, 0x0000,
		};

WORD spray2_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x02A0, 0x0000, 0x0AA8, 0x0000,
		0x0AA8, 0x0000, 0x02A0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD diagonal_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0020, 0x0040,
		0x0080, 0x0100, 0x0200, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD box1_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0180,
		0x0180, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD box2_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x03C0, 0x03C0,
		0x03C0, 0x03C0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD box3_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0FF0, 0x0FF0, 0x0FF0, 0x0FF0,
		0x0FF0, 0x0FF0, 0x0FF0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD box4_cursor[16] = {
		0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
		0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF, 0xFFFF,
		};

WORD circ1_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0080,
		0x01C0, 0x0080, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD circ2_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0180, 0x03C0,
		0x03C0, 0x0180, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD circ3_cursor[16] =  {
		0x0000, 0x0000, 0x0000, 0x03C0, 0x0FF0, 0x1FF8, 0x1FF8, 0x3FFC,
		0x3FFC, 0x3FFC,	0x1FF8, 0x1FF8,	0x0FF0,	0x03C0, 0x0000, 0x0000,
		};

WORD vline_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0080, 0x0080, 0x0080,
		0x0080, 0x0080, 0x0080, 0x0080, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD dot_c[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		0x0080, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD poly_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x07C0, 0x0820, 0x1010,
		0x2008, 0x1010, 0x0820, 0x07C0, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD sharp_cursor[16] = {
		0x0000, 0x0000, 0x0220, 0x0220, 0x0220, 0x0220, 0x3FFE, 0x0220,
		0x0220, 0x0220, 0x3FFE, 0x0220, 0x0220, 0x0220, 0x0220, 0x0000,
		};

WORD hline_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		0x03E0, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0000,
		};

WORD flood_cursor[16] = {
	0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0080, 0x0080, 0x0140,
	0x0E38, 0x0140, 0x0080, 0x1E24, 0x1024, 0x1924, 0x1124, 0x1124, 
	};

WORD abc_cursor[16] = {
	0x0080, 0x0080, 0x0080, 0x0080, 0x0080, 0x0080, 0x0080, 0x0080,
	0x0080, 0x00ff, 0x0080, 0x0080, 0x0000, 0x0000, 0x0000, 0x0000,
	};

WORD hcross_cursor[16] = {
		0x0000, 0x0000, 0x0000, 0x0000, 0x0000, 0x0080, 0x0080, 0x0080,
		0x0770, 0x0080, 0x0080, 0x0080, 0x0000, 0x0000, 0x0000, 0x0000,
		};


WORD brush_ix;

WORD *brushes[] = {
	default_cursor, spray1_cursor, spray2_cursor, diagonal_cursor, 
	box1_cursor, box2_cursor, box3_cursor, box4_cursor,
	circ1_cursor, circ2_cursor, circ3_cursor, vline_cursor,
	dot_c, sharp_cursor, poly_cursor, hline_cursor,
	flood_cursor, abc_cursor, hcross_cursor,
	};


set_brush(ix)
register WORD ix;
{
static last_ix;

brush_ix = ix;
pick_cursor();
}

WORD last_brush_ix = -1;

pick_cursor()
{
WORD ix;

ix = brush_ix;
if (text_cursor)
	ix = 17;
else if (fill_cursor)
	ix = 16;
if (ix == 0 && zoom_flag)
	ix = 18;
if (!use_brush_cursor)
	ix = 0;
if (ix != last_brush_ix)
	{
	preshift(brushes[ix], preshift1);
	last_brush_ix = ix;
	if (use_cursor0 = (ix == 0))
		preshift(default2_cursor, preshift2);
	hide_mouse();		/* and force flicker mouse so immediately*/
	show_mouse();		/* see new brush */
	}
}

