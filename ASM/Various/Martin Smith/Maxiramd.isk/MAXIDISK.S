* 10/03/89
* MAXIDISK
* DISASSEMBLED WITH DEVPAC V2
* NO MACROS SO CODE IS PORTABLE	
	JMP	START
	JMP	VARIABLES
START	MOVEA.L	A7,A5
	MOVEA.L	4(A5),A5
	MOVE.L	$C(A5),D0
	ADD.L	$14(A5),D0
	ADD.L	$1C(A5),D0
	ADD.L	#$200,D0
	MOVE.L	D0,D1
	ADD.L	A5,D1
	AND.L	#$FFFFFFFE,D1
	MOVEA.L	D1,A7			STACK AT BSS END
	MOVE.L	D0,-(A7)
	MOVE.L	A5,-(A7)
	CLR.W	-(A7)
	MOVE.W	#$4A,-(A7)		SHRINK
	TRAP	#1
	LEA	$C(A7),A7

	MOVEA.L	$18(A5),A0		A0 = BSS START
	MOVEA.L	$18(A5),A1		
	ADDA.L	$1C(A5),A1		A1 = BSS END
	MOVE.L	$14(A5),D0		D0 = DATA SIZE
	SUBQ.L	#1,D0
	BLE.S	L4FE96
.LOOP	MOVE.B	-(A0),-(A1)		MOVE DATA INTO TOP BSS AREA
	DBF	D0,.LOOP
L4FE96	MOVEA.L	$10(A5),A0		DATA START
	MOVE.L	$1C(A5),D0		BSS SIZE
	SUBQ.L	#1,D0
L4FEA0	CLR.B	(A0)+			CLEAR OUT DATA AREA [BSS SIZE]
	DBF	D0,L4FEA0
	MOVEA.L	$10(A5),A4		DATA START
	ADDA.L	$1C(A5),A4		+ BSS SIZE - A4 POINTS TO DATA
	MOVE.L	A5,-4(A4)		BASEPAGE
	MOVEA.L	8(A5),A5		POINTER TO PRG START
	JSR	6(A5)
*	MOVEA.L	-4(A4),A0
*	PEA	$80(A0)			COMMAND LINE
*	JSR	L50596(PC)		PARSE IT
*	ADDQ.L	#4,A7			UNUSED IN .PRG FORM
	MOVE.L	-$A(A4),-(A7)
	MOVE.W	-6(A4),-(A7)
	JSR	L502D2(PC)		PRINT TITLE ETC
	ADDQ.L	#6,A7			SIZE MEM ETC
	CLR.W	-(A7)
	JSR	L51310(PC)
	MOVE.W	#$41,-(A7)		
	MOVE.W	#2,-(A7)
	TRAP	#1
	ADDQ.L	#4,A7
	RTS

DO_PARAM_BLOCK
	LINK	A6,#0
	MOVEA.L	#$472,A0		SAVE HDV_BPB
	MOVE.L	(A0),-$1A(A4)
	MOVEA.L	#$47E,A0		SAVE HDV_MEDIACH
	MOVE.L	(A0),-$1E(A4)
	MOVEA.L	#$476,A0		SAVE HDV_RW
	MOVE.L	(A0),-$22(A4)
	LEA	NEW_HDV_BPB(PC),A0
	MOVE.L	A0,D0
	MOVEA.L	#$472,A0		NEW HDV_BPB
	MOVE.L	D0,(A0)
	LEA	NEW_HDV_MEDIACH(PC),A0
	MOVE.L	A0,D0
	MOVEA.L	#$47E,A0		NEW HDV_MEDIACH
	MOVE.L	D0,(A0)
	LEA	NEW_HDV_RW(PC),A0
	MOVE.L	A0,D0
	MOVEA.L	#$476,A0		NEW HDV_RW
	MOVE.L	D0,(A0)
	MOVE.W	#1,D1
	MOVEA.L	-$E(A4),A0
	MOVE.W	4(A0),D3
	ASL.W	D3,D1
	MOVEA.L	#$4C2,A0		_DRVEBITS
	MOVE.L	(A0),D0
	EXT.L	D1
	OR.L	D1,D0
	MOVE.L	D0,(A0)
	BRA	L4FFC6
L4FF58	NOP
	NOP
NEW_HDV_BPB	LEA	L4FF58(PC),A0
	MOVEA.L	(A0),A0
	MOVEA.L	-$1A(A0),A1
	LEA	L4FFD0(PC),A2
	MOVE.W	4(A7),D0
	BRA	L4FF9A
NEW_HDV_MEDIACH
	LEA	L4FF58(PC),A0
	MOVEA.L	(A0),A0
	MOVEA.L	-$1E(A0),A1
	LEA	L4FFE6(PC),A2
	MOVE.W	4(A7),D0
	BRA.S	L4FF9A
NEW_HDV_RW
	LEA	L4FF58(PC),A0
	MOVEA.L	(A0),A0
	MOVEA.L	-$22(A0),A1
	LEA	L4FFF8(PC),A2
	MOVE.W	$E(A7),D0
L4FF9A	MOVE.L	A1,D1
	MOVEA.L	-$E(A0),A1
	CMP.W	4(A1),D0
	BEQ.S	L4FFAC
	MOVEA.L	D1,A1
	JMP	(A1)
L4FFAC	MOVEM.L	D3/A4,-$2A(A0)
	MOVEA.L	A0,A4
	MOVE.L	(A7)+,-$2E(A4)
	JSR	(A2)
	MOVE.L	-$2E(A4),-(A7)
	MOVEM.L	-$2A(A4),D3/A4
	RTS
L4FFC6	LEA	L4FF58(PC),A0
	MOVE.L	A4,(A0)
	UNLK	A6
	RTS
L4FFD0	
	MOVEA.L	-$E(A4),A0
	LEA	8(A0),A0
	MOVE.L	A0,D0
	RTS
L4FFE6	
	MOVEQ.L	#0,D0
	RTS
L4FFF8	LINK	A6,#-$12
	MOVEM.L	D4-d7/A2-a3,-(A7)
	MOVEA.L	$A(A6),A3
	MOVE.W	$10(A6),D7
	BRA	L502B0
L5000C	CMPI.W	#$E,D7
	BGE	L501B6
	MOVE.L	-$16(A4),D0
	MOVE.L	#$200,D1
	MOVE.L	D1,-(A7)
	MOVE.W	D7,D1
	EXT.L	D1
	MOVE.L	D1,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D1
	ADD.L	D1,D0
	MOVEA.L	D0,A2
	MOVE.W	8(A6),D0
	AND.W	#1,D0
	BEQ	L501A0
	CMPI.W	#5,D7
	BLT	L5018A
	CMPI.W	#9,D7
	BGE	L5018A
	CMPI.W	#5,D7
	BNE.S	L5005C
	MOVE.W	#2,D6
	BRA.S	L50060
L5005C	CLR.W	D6
L50060	BRA.S	L500C2
L50064	MOVE.W	D6,D0
	MOVE.L	A3,D1
	ASL.L	#1,D0
	MOVEA.L	D1,A0
	ADDA.W	D0,A0
	TST.W	(A0)
	BNE	L500C0
	MOVE.W	#$100,D5
	MOVE.W	D7,D1
	SUBQ.W	#5,D1
	MULS	D1,D5
	ADD.W	D6,D5
	SUBQ.W	#2,D5
	MOVE.W	D5,-$12(A6)
	MOVE.W	#2,D5
	MULS	-$12(A6),D5
	CLR.W	D4
	BRA.S	L500B8
L50096	MOVE.W	D5,D0
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	MOVE.L	(A0),-(A7)
	JSR	L51022(PC)
	ADDQ.L	#4,A7
	MOVE.W	D5,D0
	ADDQ.W	#1,D5
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	CLR.L	(A0)
	ADDQ.W	#1,D4
L500B8	CMPI.W	#2,D4
	BLT.S	L50096
L500C0	ADDQ.W	#1,D6
L500C2	CMPI.W	#$100,D6
	BLT.S	L50064
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),-4(A6)
	MOVE.W	#5,D4
	BRA	L50182
L500DC	MOVE.W	D4,D0
	CMP.W	D7,D0
	BNE.S	L500EA
	MOVE.L	A3,D0
	BRA	L50104
L500EA	MOVE.L	-$16(A4),D0
	MOVE.L	#$200,D1
	MOVE.L	D1,-(A7)
	MOVE.W	D4,D1
	EXT.L	D1
	MOVE.L	D1,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D1
	ADD.L	D1,D0
L50104	MOVE.L	D0,-8(A6)
	CMPI.W	#5,D4
	BNE.S	L50118
	MOVE.W	#2,D6
	BRA.S	L5011C
L50118	MOVE.W	#0,D6
L5011C	BRA.S	L50178
L50120	MOVE.W	D6,D0
	ASL.L	#1,D0
	MOVEA.L	-8(A6),A0
	ADDA.W	D0,A0
	TST.W	(A0)
	BEQ.S	L50144
	MOVE.W	D6,D0
	ASL.L	#1,D0
	MOVEA.L	-8(A6),A0
	ADDA.W	D0,A0
	CMPI.W	#$F7FF,(A0)
	BNE	L50176
L50144	CMPI.L	#$40A,-4(A6)
	BGE.S	L50162
	MOVE.W	D6,D0
	ASL.L	#1,D0
	MOVEA.L	-8(A6),A0
	ADDA.W	D0,A0
	MOVE.W	#$F7FF,(A0)
	BRA.S	L50176
L50162	MOVE.W	D6,D0
	ASL.L	#1,D0
	MOVEA.L	-8(A6),A0
	ADDA.W	D0,A0
	CLR.W	(A0)
	SUBI.L	#$40A,-4(A6)
L50176	ADDQ.W	#1,D6
L50178	CMPI.W	#$100,D6
	BLT.S	L50120
	ADDQ.W	#1,D4
L50182	CMPI.W	#9,D4		
	BLT	L500DC		BYTE MOVER	[512]

L5018A	MOVEQ.L	#$20,D4		512 BYTES	
	BRA.S	.IN			
.LOOP	MOVE.L	(A3)+,(A2)+
	MOVE.L	(A3)+,(A2)+
	MOVE.L	(A3)+,(A2)+	
	MOVE.L	(A3)+,(A2)+
.IN	DBRA	D4,.LOOP
	BRA	MOVED
L501A0	MOVEQ.L	#$20,D4				
	BRA.S	.IN
.LOOP	MOVE.L	(A2)+,(A3)+
	MOVE.L	(A2)+,(A3)+
	MOVE.L	(A2)+,(A3)+
	MOVE.L	(A2)+,(A3)+
.IN	DBRA	D4,.LOOP

MOVED	BRA	L502AE
L501B6	MOVE.W	D7,D4
	SUB.W	#$E,D4
	MOVE.W	8(A6),D0
	AND.W	#1,D0
	BEQ	L50244
	MOVE.W	D4,D0
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	MOVE.L	(A0),-(A7)
	JSR	L51022(PC)
	ADDQ.L	#4,A7
	PEA	-4(A6)
	PEA	-$234(A4)
	MOVE.L	A3,D0
	ADD.L	#$200,D0
	MOVE.L	D0,-(A7)
	MOVE.L	A3,-(A7)
	JSR	L5115A(PC)
	ADDA.W	#$10,A7
	MOVE.L	-4(A6),-(A7)
	PEA	-$234(A4)
	MOVE.W	D4,D0
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	LEA	(A0),A0
	MOVE.L	A0,-(A7)
	JSR	L50ECC(PC)
	ADDA.W	#$C,A7
	MOVEA.L	-$E(A4),A0
	CMPI.L	#$205,$1A(A0)
	BGE	L50240
	MOVE.W	#7,-(A7)		PING!
	MOVE.W	#2,-(A7)
	MOVE.W	#3,-(A7)
	JSR	CALL_BIOS(PC)
	ADDQ.L	#6,A7
	MOVEQ.L	#$FF,D0
	BRA	L502CA
L50240	BRA	L502A8
L50244	MOVE.W	D4,D0
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	TST.L	(A0)
	BEQ	L50290
	MOVE.W	#$205,-(A7)
	PEA	-$234(A4)
	MOVE.W	D4,D0
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.W	D0,A0
	MOVE.L	(A0),-(A7)
	JSR	L50FC2(PC)
	ADDA.W	#$A,A7
	PEA	-$234(A4)
	MOVE.L	A3,D0
	ADD.L	#$200,D0
	MOVE.L	D0,-(A7)
	MOVE.L	A3,-(A7)
	JSR	L51268(PC)
	ADDA.W	#$C,A7
	BRA.S	L502A8
L50290	CLR.W	D4
	BRA.S	L502A0
L50296	MOVE.W	D4,D0
	ADDQ.W	#1,D4
	MOVEA.L	A3,A0
	ADDA.W	D0,A0
	CLR.B	(A0)
L502A0	CMPI.W	#$200,D4
	BLT.S	L50296
L502A8	ADDA.L	#$200,A3
L502AE	ADDQ.W	#1,D7
L502B0	MOVE.W	$E(A6),D0
	SUBQ.W	#1,$E(A6)
	TST.W	D0
	BGT	L5000C
	MOVEQ.L	#0,D0

L502CA	MOVEM.L	(A7)+,D4-d7/A2-a3
	UNLK	A6
	RTS
L502D2	LINK	A6,#-$32
	JSR	L509EE(PC)
	CLR.L	-(A7)
	MOVE.W	#$20,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-$12(A6)
	MOVEA.L	#$42E,A0		PHYSTOP
	MOVE.L	(A0),-$E(A4)
	MOVEA.L	-$E(A4),A0
	CMPI.L	#$14121986,(A0)
	BNE	L5033C
	JSR	L50A04(PC)
	MOVE.L	-$E(A4),D0
	ADD.L	#$22,D0
	MOVE.L	D0,-$12(A4)
	MOVE.W	#2,D0
	MOVEA.L	-$E(A4),A0
	MULS	$16(A0),D0
	EXT.L	D0
	ASL.L	#2,D0
	MOVE.L	D0,-$1E(A6)
	MOVE.L	-$12(A4),D0
	ADD.L	-$1E(A6),D0
	MOVE.L	D0,-$16(A4)
	JSR	DO_PARAM_BLOCK(PC)
	BRA	L50562
L5033C	PEA	$FFFFFFFF
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	CMPI.L	#$C350,D0
	BGE	L50368
	PEA	(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	BRA	L50592
L50368	CLR.W	-(A7)
	PEA	$2A(A4)
	MOVE.W	#$3D,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#8,A7
	MOVE.W	D0,-$14(A6)
	PEA	-$14(A6)
	PEA	-6(A6)
	PEA	-4(A6)
	PEA	-2(A6)
	JSR	L50A70(PC)
	ADDA.W	#$10,A7
	CLR.W	-(A7)
	CLR.W	-(A7)
	MOVE.W	#$15,-(A7)
	JSR	CALL_XBIOS(PC)
	ADDQ.L	#6,A7
	MOVE.W	-2(A6),D0
	ADDQ.W	#8,D0
	MOVE.W	D0,-(A7)
	JSR	L505C4(PC)
	ADDQ.L	#2,A7
	MOVE.L	D0,-$E(A4)
	CLR.W	-(A7)
	MOVE.W	#1,-(A7)
	MOVE.W	#$15,-(A7)
	JSR	CALL_XBIOS(PC)
	ADDQ.L	#6,A7
	PEA	$38(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVEA.L	-$E(A4),A0
	MOVE.L	#$14121986,(A0)
	MOVEA.L	-$E(A4),A0
	MOVE.W	-6(A6),4(A0)
	MOVEA.L	-$E(A4),A0
	MOVE.W	-2(A6),6(A0)
	MOVE.W	-4(A6),-(A7)
	JSR	L50680(PC)
	ADDQ.L	#2,A7
	MOVE.L	-$E(A4),D0
	ADD.L	#$22,D0
	MOVE.L	D0,-$12(A4)
	MOVE.W	#2,D0
	MOVEA.L	-$E(A4),A0
	MULS	$16(A0),D0
	EXT.L	D0
	ASL.L	#2,D0
	MOVE.L	D0,-$28(A6)
	MOVE.L	-$12(A4),D0
	ADD.L	-$28(A6),D0
	MOVE.L	D0,-$16(A4)
	CLR.L	-$A(A6)
	BRA.S	L50442
L50430	MOVE.L	-$A(A6),D0
	ADDQ.L	#1,-$A(A6)
	ASL.L	#2,D0
	MOVEA.L	-$12(A4),A0
	ADDA.L	D0,A0
	CLR.L	(A0)
L50442	MOVE.L	#2,D0
	MOVEA.L	-$E(A4),A0
	MOVE.L	D0,-(A7)
	MOVE.W	$16(A0),D0
	EXT.L	D0
	MOVE.L	D0,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D0
	MOVE.L	D0,-$32(A6)
	MOVE.L	-$A(A6),D0
	CMP.L	-$32(A6),D0
	BLT.S	L50430
	CLR.L	-$A(A6)
	BRA.S	L50484
L50474	MOVE.L	-$A(A6),D0
	ADDQ.L	#1,-$A(A6)
	MOVEA.L	-$16(A4),A0
	ADDA.L	D0,A0
	CLR.B	(A0)
L50484	CMPI.L	#$1C00,-$A(A6)
	BLT.S	L50474
	MOVE.L	-$16(A4),D0
	ADD.L	#$1C00,D0
	MOVE.L	D0,-$E(A6)
	MOVE.L	#$400,D0
	MOVE.W	-2(A6),D1
	ADDQ.W	#8,D1
	MOVE.L	D0,-(A7)
	MOVE.W	D1,D0
	EXT.L	D0
	MOVE.L	D0,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D0
	MOVE.L	-$E(A6),D1
	MOVE.L	-$E(A4),D2
	SUB.L	D2,D1
	SUB.L	D1,D0
	MOVE.L	D0,-(A7)
	MOVE.L	-$E(A6),-(A7)
	JSR	L51124(PC)
	ADDQ.L	#8,A7
	MOVEQ.L	#2,D1
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),D0
	MOVE.L	D0,-(A7)
	MOVE.L	#2,D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	MOVE.L	D0,-(A7)
	MOVE.L	#$205,D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	MOVE.L	D1,-(A7)
	MOVE.L	D0,D1
	MOVE.L	D1,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D1
	MOVE.L	#$A04,D0
	ADD.L	D1,D0
	MOVE.L	D0,-$A(A6)
	BRA.S	L50530
L5051E	MOVE.L	-$16(A4),D0
	ADD.L	-$A(A6),D0
	MOVEA.L	D0,A0
	MOVE.W	#$F7FF,(A0)
	ADDQ.L	#2,-$A(A6)
L50530	CMPI.L	#$1200,-$A(A6)
	BLT.S	L5051E
	JSR	DO_PARAM_BLOCK(PC)
	TST.W	-$14(A6)
	BLE.S	L50554
	MOVE.W	-$14(A6),-(A7)
	JSR	L50BAE(PC)
	ADDQ.L	#2,A7
L50554	MOVE.W	-$14(A6),-(A7)
	MOVE.W	#$3E,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L50562	MOVE.L	-$12(A6),-(A7)
	MOVE.W	#$20,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	A7,-$238(A4)
	CLR.W	-(A7)
	MOVE.L	-$238(A4),D0
	ADD.L	#$64,D0
	MOVE.L	-4(A4),D1
	SUB.L	D1,D0
	MOVE.L	D0,-(A7)
	MOVE.W	#$31,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#8,A7
L50592	UNLK	A6
	RTS

L50596	RTS			COMMAND LINE

MOVE_SCRN	LINK	A6,#0			SCREEN MOVE
	MOVEM.L	D7/A2-a3,-(A7)
	MOVEA.L	8(A6),A3
	MOVEA.L	$C(A6),A2
	MOVE.W	#$1F40/4-1,D7
.LOOP	MOVE.L	(A3)+,(A2)+
	MOVE.L	(A3)+,(A2)+
	MOVE.L	(A3)+,(A2)+
	MOVE.L	(A3)+,(A2)+
	DBRA	D7,.LOOP
	MOVEM.L	(A7)+,D7/A2-A3
	UNLK	A6
	RTS
L505C4	LINK	A6,#-$12
	MOVE.L	#$400,D0
	MOVE.L	D0,-(A7)
	MOVE.W	8(A6),D0
	EXT.L	D0
	MOVE.L	D0,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D0
	MOVE.L	D0,-$A(A6)
	PEA	$FFFFFFFF
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-6(A6)
	MOVE.L	-6(A6),D0
	SUB.L	-$A(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-$E(A6)
	MOVE.L	-$A(A6),-(A7)
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-$12(A6)
	MOVE.L	-$E(A6),-(A7)
	MOVE.W	#$49,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	-$12(A6),-(A7)
	MOVEA.L	#$44E,A0		V_BAS_AD
	MOVE.L	(A0),-(A7)
	JSR	MOVE_SCRN(PC)
	ADDQ.L	#8,A7
	MOVEA.L	#$45E,A0
	MOVE.L	-$12(A6),(A0)
	MOVE.W	#$25,-(A7)
	JSR	CALL_XBIOS(PC)
	ADDQ.L	#2,A7
	MOVEA.L	#$45E,A0		SCREEN_PT
	CLR.L	(A0)
	MOVE.L	-$12(A6),D0
	ADD.L	#$8000,D0		SCRN_SIZE
	MOVEA.L	#$42E,A0		PHYSTOP
	MOVE.L	D0,(A0)
	MOVE.L	-$12(A6),D0
	ADD.L	#$8000,D0
L5067C	UNLK	A6
	RTS
L50680	LINK	A6,#0
	LEA	-$24A(A4),A1
	MOVEA.L	-$E(A4),A0
	LEA	8(A0),A0
	MOVEQ	#8,D0
	JSR	L51658(PC)
	MOVE.W	8(A6),D0
	MULS	#2,D0
	EXT.L	D0
	DIVS	#2,D0
	MOVEA.L	-$E(A4),A0
	MOVE.W	D0,$16(A0)
	UNLK	A6
	RTS
L506B0	LINK	A6,#-4
	CLR.W	-4(A6)
L506B8	MOVEA.L	$12(A6),A0
	TST.W	(A0)
	BLE	L50762
L506C4	CLR.B	-1(A6)
	PEA	-1(A6)
	MOVE.L	#1,-(A7)
	MOVEA.L	$12(A6),A0
	MOVE.W	(A0),-(A7)
	MOVE.W	#$3F,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$61,D0
	BLT.S	L5070E
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$7A,D0
	BGT.S	L5070E
	MOVE.B	-1(A6),D0
	EXT.W	D0
	SUB.W	#$20,D0
	MOVE.B	D0,-1(A6)
L5070E	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ.S	L50754
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#9,D0
	BEQ.S	L50754
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BEQ.S	L50754
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BEQ.S	L50754
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$C,D0
	BNE.S	L5075E
L50754	TST.W	-4(A6)
	BEQ	L506C4
L5075E	BRA.S	L50770
L50762	MOVE.W	#7,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#2,A7
	MOVE.B	D0,-1(A6)
L50770	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#8,D0
	BNE.S	L50798
	MOVE.W	-4(A6),D0
	BEQ.S	L50798
	PEA	$3C(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	SUBQ.W	#1,-4(A6)
L50798	MOVE.W	-4(A6),D0
	CMP.W	$C(A6),D0
	BGE.S	L507F0
	MOVE.B	-1(A6),D0
	MOVE.B	$F(A6),D1
	EXT.W	D1
	EXT.W	D0
	CMP.W	D1,D0
	BLT.S	L507F0
	MOVE.B	-1(A6),D0
	MOVE.B	$11(A6),D1
	EXT.W	D1
	EXT.W	D0
	CMP.W	D1,D0
	BGT.S	L507F0
	MOVE.B	-1(A6),D0
	EXT.W	D0
	MOVE.W	D0,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
	MOVE.W	-4(A6),D0
	ADDQ.W	#1,-4(A6)
	MOVEA.L	8(A6),A0
	ADDA.W	D0,A0
	MOVE.B	-1(A6),(A0)
	BRA.S	L50850
L507F0	MOVEA.L	$12(A6),A0
	TST.W	(A0)
	BLE.S	L50850
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ.S	L50842
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#9,D0
	BEQ.S	L50842
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BEQ.S	L50842
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BEQ.S	L50842
	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$C,D0
	BNE.S	L5084A
L50842	BRA.S	L5085E
	BRA	L50850
L5084A	MOVEA.L	$12(A6),A0
	CLR.W	(A0)
L50850	MOVE.B	-1(A6),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BNE	L506B8
L5085E	PEA	$40(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVEA.L	8(A6),A0
	ADDA.W	-4(A6),A0
	CLR.B	(A0)
	MOVE.W	-4(A6),D0
	
L5087E	UNLK	A6
	RTS
L50882	LINK	A6,#-4
	CLR.L	-4(A6)
	BRA.S	L508BC
L5088E	MOVE.L	#$A,D0
	MOVE.L	D0,-(A7)
	MOVE.L	-4(A6),D0
	MOVE.L	D0,-(A7)
	JSR	L514D6(PC)
	MOVE.L	(A7)+,D0
	MOVEA.L	8(A6),A0
	ADDQ.L	#1,8(A6)
	MOVE.B	(A0),D3
	EXT.W	D3
	EXT.L	D3
	ADD.L	D3,D0
	SUB.L	#$30,D0
	MOVE.L	D0,-4(A6)
L508BC	MOVE.W	#$30,D0
	MOVEA.L	8(A6),A0
	MOVE.B	(A0),D1
	EXT.W	D1
	CMP.W	D1,D0
	BGT.S	L508DE
	MOVEA.L	8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$39,D0
	BLE.S	L5088E
L508DE	MOVE.L	-4(A6),D0
	
L508E6	UNLK	A6
	RTS
L508EA	LINK	A6,#-8
	LEA	-$256(A4),A0
	MOVE.L	A0,-8(A6)
	MOVE.L	#$3B9ACA00,-4(A6)
	BRA	L5091C
L50902	MOVE.L	-4(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.L	#$A,D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	MOVE.L	D0,-4(A6)
L5091C	MOVE.L	8(A6),D0
	CMP.L	-4(A6),D0
	BGE	L50934
	CMPI.L	#1,-4(A6)
	BGT.S	L50902
L50934	MOVE.L	8(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.L	-4(A6),D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	ADD.L	#$30,D0
	MOVEA.L	-8(A6),A0
	ADDQ.L	#1,-8(A6)
	MOVE.B	D0,(A0)
	MOVE.L	8(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.L	-4(A6),D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	ADDQ.L	#4,A7
	MOVE.L	(A7)+,D0
	MOVE.L	D0,8(A6)
	MOVE.L	-4(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.L	#$A,D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	MOVE.L	D0,-4(A6)
	MOVE.L	-4(A6),D0
	BNE.S	L50934
	MOVEA.L	-8(A6),A0
	CLR.B	(A0)
	LEA	-$256(A4),A0
	MOVE.L	A0,D0
	
L509A2	UNLK	A6
	RTS
L509A6	LINK	A6,#0
	PEA	$44(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	PEA	$FFFFFFFF
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-(A7)
	JSR	L508EA(PC)
	ADDQ.L	#4,A7
	MOVE.L	D0,-(A7)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	PEA	$58(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	UNLK	A6
	RTS
L509EE	
	PEA	$64(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	RTS
L50A04	LINK	A6,#0
	PEA	$114(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.W	#$41,D0
	MOVEA.L	-$E(A4),A0
	ADD.W	4(A0),D0
	MOVE.W	D0,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
	PEA	$12E(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVEA.L	-$E(A4),A0
	MOVE.W	6(A0),D0
	EXT.L	D0
	MOVE.L	D0,-(A7)
	JSR	L508EA(PC)
	ADDQ.L	#4,A7
	MOVE.L	D0,-(A7)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	PEA	$134(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	JSR	L509A6(PC)
	UNLK	A6
	RTS
L50A70	LINK	A6,#-$C
	PEA	$FFFFFFFF
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-(A7)
	MOVE.L	#$400,D0
	MOVE.L	D0,-(A7)
	JSR	L51464(PC)
	MOVE.L	(A7)+,D0
	ADDQ.L	#4,A7
	SUB.L	#$1E,D0
	MOVE.W	D0,-2(A6)
	JSR	L509A6(PC)
	PEA	$140(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
L50AB2	PEA	$144(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	$14(A6),-(A7)
	MOVE.W	#$39,-(A7)
	MOVE.W	#$30,-(A7)
	MOVE.W	#4,-(A7)
	PEA	-$25C(A4)
	JSR	L506B0(PC)
	ADDA.W	#$E,A7
	PEA	-$25C(A4)
	JSR	L50882(PC)
	ADDQ.L	#4,A7
	MOVEA.L	8(A6),A0
	MOVE.W	D0,(A0)
	MOVEA.L	8(A6),A0
	CMPI.W	#$A,(A0)
	BLT.S	L50AB2
	MOVEA.L	8(A6),A0
	MOVE.W	(A0),D0
	CMP.W	-2(A6),D0
	BGT.S	L50AB2
	MOVEA.L	$C(A6),A0
	MOVE.W	#$400,(A0)
	PEA	$162(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.W	#$10,-(A7)
	MOVE.W	#$B,-(A7)
	JSR	CALL_BIOS(PC)
	ADDQ.L	#4,A7
L50B2A	PEA	$166(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	$14(A6),-(A7)
	MOVE.W	#$50,-(A7)
	MOVE.W	#$43,-(A7)
	MOVE.W	#1,-(A7)
	PEA	-$25C(A4)
	JSR	L506B0(PC)
	ADDA.W	#$E,A7
	LEA	-$25C(A4),A0
	MOVEA.L	A0,A0
	MOVE.B	(A0),D0
	EXT.W	D0
	SUB.W	#$41,D0
	MOVEA.L	$10(A6),A0
	MOVE.W	D0,(A0)
	LEA	-$25C(A4),A0
	MOVEA.L	A0,A0
	MOVE.B	(A0),D0
	EXT.W	D0
	TST.W	D0
	BEQ.S	L50B2A
	MOVE.W	#1,D0
	MOVEA.L	$10(A6),A0
	MOVE.W	(A0),D3
	ASL.W	D3,D0
	MOVE.W	D0,-$C(A6)
	MOVEA.L	#$4C2,A0		_DRVBITS
	MOVE.L	(A0),D0
	MOVE.W	-$C(A6),D3
	EXT.L	D3
	AND.L	D3,D0
	BNE.S	L50B2A
	CLR.W	-(A7)
	MOVE.W	#$B,-(A7)
	JSR	CALL_BIOS(PC)
	ADDQ.L	#4,A7
	UNLK	A6
	RTS
L50BAE	LINK	A6,#-$14
	MOVE.L	#$3E8,-(A7)
	MOVE.W	#$48,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	D0,-4(A6)
	MOVE.L	-4(A6),D0
	BEQ	L50E36
	MOVE.L	-4(A6),-(A7)
	MOVE.L	#$3E6,-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$3F,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
	MOVE.W	D0,-$14(A6)
	MOVE.B	#0,D0
	MOVEA.L	-4(A6),A0
	ADDA.W	-$14(A6),A0
	MOVE.B	D0,1(A0)
	MOVEA.L	-4(A6),A0
	ADDA.W	-$14(A6),A0
	MOVE.B	D0,(A0)
	MOVE.L	-4(A6),-8(A6)
L50C0C	BRA.S	L50C14
L50C10	ADDQ.L	#1,-8(A6)
L50C14	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ.S	L50C10
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#9,D0
	BEQ.S	L50C10
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BEQ.S	L50C10
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BEQ.S	L50C10
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$C,D0
	BEQ.S	L50C10
	MOVE.L	-8(A6),-$C(A6)
	BRA.S	L50C72
L50C6E	ADDQ.L	#1,-8(A6)
L50C72	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	BEQ	L50CCC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ	L50CCC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#9,D0
	BEQ	L50CCC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BEQ.S	L50CCC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BEQ.S	L50CCC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$C,D0
	BNE.S	L50C6E
L50CCC	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ.S	L50CEC
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#9,D0
	BNE	L50D82
L50CEC	MOVEA.L	-8(A6),A0
	ADDQ.L	#1,-8(A6)
	CLR.B	(A0)
	BRA.S	L50CFE
L50CFA	ADDQ.L	#1,-8(A6)
L50CFE	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$20,D0
	BEQ.S	L50CFA
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#9,D0
	BEQ.S	L50CFA
	MOVE.L	-8(A6),-$10(A6)
	MOVEA.L	-8(A6),A0
	ADDQ.L	#1,-8(A6)
	MOVE.B	(A0),-$11(A6)
	MOVEA.L	-$10(A6),A0
	CLR.B	(A0)
	BRA.S	L50D5A
L50D3A	MOVE.B	-$11(A6),-$12(A6)
	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),-$11(A6)
	MOVEA.L	-8(A6),A0
	ADDQ.L	#1,-8(A6)
	MOVE.B	-$12(A6),(A0)
	MOVEA.L	-$10(A6),A0
	ADDQ.B	#1,(A0)
L50D5A	MOVE.B	-$11(A6),D0
	BEQ.S	L50D7E
	MOVE.B	-$11(A6),D0
	EXT.W	D0
	CMP.W	#$D,D0
	BEQ.S	L50D7E
	MOVE.B	-$11(A6),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BNE.S	L50D3A
L50D7E	BRA.S	L50D92
L50D82	MOVE.L	-8(A6),-$10(A6)
	MOVEA.L	-8(A6),A0
	ADDQ.L	#1,-8(A6)
	CLR.B	(A0)
L50D92	MOVEA.L	-$C(A6),A0
	MOVE.B	(A0),D0
	BEQ	L50E2C
	CLR.L	-(A7)
	MOVE.L	-$10(A6),-(A7)
	MOVE.L	-$C(A6),-(A7)
	CLR.W	-(A7)
	MOVE.W	#$4B,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$10,A7
	TST.L	D0
	BGE	L50E2C
	PEA	$17E(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.L	-$C(A6),-(A7)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	MOVE.W	#$20,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
	MOVEA.L	-$10(A6),A0
	ADDQ.L	#1,-$10(A6)
	MOVE.B	(A0),-$12(A6)
	BRA	L50E10
L50DF8	MOVEA.L	-$10(A6),A0
	ADDQ.L	#1,-$10(A6)
	MOVE.B	(A0),D0
	EXT.W	D0
	MOVE.W	D0,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L50E10	MOVE.B	-$12(A6),D0
	SUBQ.B	#1,-$12(A6)
	TST.B	D0
	BNE.S	L50DF8
	PEA	$18C(A4)
	MOVE.W	#9,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
L50E2C	MOVEA.L	-8(A6),A0
	MOVE.B	(A0),D0
	BNE	L50C0C
L50E36	MOVE.L	-4(A6),-(A7)
	MOVE.W	#$49,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	UNLK	A6
	RTS
L50E48	LINK	A6,#0			MOVE LONGS AND ODD BYTES
	MOVEM.L	D6-D7/A2-A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVEA.L	$C(A6),A2
	MOVE.L	$10(A6),D7
	MOVE.L	D7,D6
	ASR.L	#2,D6
	BRA.S	L50E66
L50E64	MOVE.L	(A3)+,(A2)+		DONT MESS WITH THIS
L50E66	DBF	D6,L50E64
	AND.L	#3,D7
	BRA.S	L50E76
L50E74	MOVE.B	(A3)+,(A2)+
L50E76	MOVE.L	D7,D0
	SUBQ.L	#1,D7
	TST.L	D0
	BGT.S	L50E74
	MOVEM.L	(A7)+,D6-D7/A2-A3
	UNLK	A6
	RTS
L50E8C	LINK	A6,#0
	MOVEM.L	A2-A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVEA.L	$C(A6),A2
	MOVE.L	A3,D0
	ADDQ.L	#8,D0
	ADD.L	4(A3),D0
	CMP.L	A2,D0
	BNE	L50EC2
	MOVE.L	4(A2),D0
	ADDQ.L	#8,D0
	ADD.L	D0,4(A3)
	MOVE.L	(A2),(A3)
	MOVEA.L	-$E(A4),A0
	ADDQ.L	#8,$1A(A0)
	BRA.S	L50EC4
L50EC2	MOVE.L	A2,(A3)
L50EC4	MOVEM.L	(A7)+,A2-A3
	UNLK	A6
	RTS
L50ECC	LINK	A6,#0
	MOVEM.L	D5-D7/A2-A3,-(A7)
	MOVEA.L	$C(A6),A3
	MOVE.L	$10(A6),D7
	MOVEQ.L	#0,D5
	MOVE.L	D7,D0
	ADDQ.L	#1,D0
	AND.L	#$FFFFFFFE,D0
	MOVE.L	D0,D7
	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A2
	BRA	L50F10
L50EF6	MOVE.L	D6,-(A7)
	MOVE.L	A2,D0
	ADDQ.L	#8,D0
	MOVE.L	D0,-(A7)
	MOVE.L	A3,-(A7)
	JSR	L50E48(PC)
	ADDA.W	#$C,A7
	SUB.L	D6,D7
	ADDA.L	D6,A3
	ADD.L	D6,D5
	MOVEA.L	(A2),A2
L50F10	CMPA.L	#0,A2
	BEQ	L50F26
	MOVE.L	4(A2),D0
	MOVE.L	D0,D6
	CMP.L	D7,D0
	BLT.S	L50EF6
L50F26	CMPA.L	#0,A2
	BNE	L50F3A
	MOVEA.L	8(A6),A0
	CLR.L	(A0)
	BRA	L50FBA
L50F3A	MOVEA.L	-$E(A4),A0
	MOVE.L	$1E(A0),D0
	MOVEA.L	8(A6),A0
	MOVE.L	D0,(A0)
	MOVE.L	D7,-(A7)
	MOVE.L	A2,D0
	ADDQ.L	#8,D0
	MOVE.L	D0,-(A7)
	MOVE.L	A3,-(A7)
	JSR	L50E48(PC)
	ADDA.W	#$C,A7
	MOVE.L	D6,D0
	MOVE.L	D7,D1
	ADDQ.L	#8,D1
	CMP.L	D1,D0
	BGE.S	L50F74
	MOVEA.L	-$E(A4),A0
	MOVE.L	(A2),$1E(A0)
	ADD.L	D6,D5
	BRA	L50FAA
L50F74	MOVE.L	D7,4(A2)
	MOVE.L	A2,D0
	ADDQ.L	#8,D0
	ADD.L	4(A2),D0
	MOVEA.L	-$E(A4),A0
	MOVE.L	D0,$1E(A0)
	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A0
	MOVE.L	(A2),(A0)
	MOVE.L	D6,D0
	SUB.L	D7,D0
	SUBQ.L	#8,D0
	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A0
	MOVE.L	D0,4(A0)
	MOVE.L	D7,D0
	ADDQ.L	#8,D0
	ADD.L	D0,D5
L50FAA	CLR.L	(A2)
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),D0
	SUB.L	D5,D0
	MOVE.L	D0,$1A(A0)
L50FBA	MOVEM.L	(A7)+,D5-D7/A2-A3
	UNLK	A6
	RTS
L50FC2	LINK	A6,#0
	MOVEM.L	D6-D7/A2-A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVEA.L	$C(A6),A2
	MOVE.L	$10(A6),D7
	BRA	L51006
L50FDA	MOVE.L	4(A3),D6
	CMP.L	D7,D6
	BGE.S	L50FEC
	MOVE.L	4(A3),D6
	BRA.S	L50FEE
L50FEC	MOVE.L	D7,D6
L50FEE	MOVE.L	D6,-(A7)
	MOVE.L	A2,-(A7)
	MOVE.L	A3,D0
	ADDQ.L	#8,D0
	MOVE.L	D0,-(A7)
	JSR	L50E48(PC)
	ADDA.W	#$C,A7
	SUB.L	D6,D7
	ADDA.L	D6,A2
	MOVEA.L	(A3),A3
L51006	CMPA.L	#0,A3
	BEQ.S	L5101A
	TST.L	D7
	BGT.S	L50FDA
L5101A	MOVEM.L	(A7)+,D6-D7/A2-A3
	UNLK	A6
	RTS
L51022	LINK	A6,#-4
	MOVEM.L	A2-A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVEA.L	-$E(A4),A0
	TST.L	$1E(A0)
	BEQ	L51086
	CMPA.L	#0,A3
	BEQ	L51086
	MOVE.L	A3,D0
	MOVEA.L	-$E(A4),A0
	CMP.L	$1E(A0),D0
	BGE	L51086
	MOVE.L	(A3),-4(A6)
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),D0
	ADD.L	4(A3),D0
	MOVE.L	D0,$1A(A0)
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1E(A0),-(A7)
	MOVE.L	A3,-(A7)
	JSR	L50E8C(PC)
	ADDQ.L	#8,A7
	MOVEA.L	-$E(A4),A0
	MOVE.L	A3,$1E(A0)
	MOVEA.L	-4(A6),A3
L51086	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A2
	BRA	L51108
L51092	TST.L	(A2)
	BNE	L510CE
	MOVE.L	A3,-4(A6)
	BRA.S	L510B6
L510A4	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),D0
	ADD.L	4(A3),D0
	MOVE.L	D0,$1A(A0)
	MOVEA.L	(A3),A3
L510B6	CMPA.L	#0,A3
	BNE.S	L510A4
	MOVE.L	A3,-(A7)
	MOVE.L	A2,-(A7)
	JSR	L50E8C(PC)
	ADDQ.L	#8,A7
	BRA	L51108
L510CE	MOVE.L	(A2),D0
	CMP.L	A3,D0
	BLE	L51106
	MOVE.L	(A3),-4(A6)
	MOVEA.L	-$E(A4),A0
	MOVE.L	$1A(A0),D0
	ADD.L	4(A3),D0
	MOVE.L	D0,$1A(A0)
	MOVE.L	(A2),-(A7)
	MOVE.L	A3,-(A7)
	JSR	L50E8C(PC)
	ADDQ.L	#8,A7
	MOVE.L	A3,-(A7)
	MOVE.L	A2,-(A7)
	JSR	L50E8C(PC)
	ADDQ.L	#8,A7
	MOVEA.L	-4(A6),A3
	BRA.S	L51108
L51106	MOVEA.L	(A2),A2
L51108	CMPA.L	#0,A2
	BEQ.S	L5111C
	CMPA.L	#0,A3
	BNE.S	L51092
L5111C	MOVEM.L	(A7)+,A2-A3
	UNLK	A6
	RTS
L51124	LINK	A6,#0
	MOVEA.L	-$E(A4),A0
	MOVE.L	8(A6),$1E(A0)
	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A0
	CLR.L	(A0)
	MOVE.L	$C(A6),D0
	SUBQ.L	#8,D0
	MOVEA.L	-$E(A4),A0
	MOVE.L	D0,$1A(A0)
	MOVEA.L	-$E(A4),A0
	MOVEA.L	$1E(A0),A0
	MOVE.L	D0,4(A0)
	UNLK	A6
	RTS
L5115A	LINK	A6,#-4
	MOVEM.L	D4-D7/A2-A3,-(A7)
	MOVEM.L	A4-A5,-(A7)
	LEA	-$165C(A4),A1
	LEA	-$65C(A4),A0
	MOVE.L	A0,-4(A6)
	MOVE.L	#$3F,D0
L51178	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	CLR.L	(A0)+
	DBF	D0,L51178
	MOVEA.L	$10(A6),A4
	MOVEA.L	$14(A6),A0
	MOVE.L	A4,(A0)
	MOVEA.L	A4,A5
	CLR.B	(A4)+
	MOVEA.L	8(A6),A2
	BRA	L5124C
L5119A	MOVEQ	#0,D1
	MOVE.B	(A2),D1
	LSL.W	#2,D1
	MOVEA.L	-4(A6),A0
	MOVE.L	0(A0,D1.W),D0
	BNE	L511B8
	MOVE.L	A1,0(A0,D1.W)
	CLR.L	(A1)+
	MOVE.L	A2,(A1)+
	BRA	L5123E
L511B8	MOVE.L	$C(A6),D6
	SUB.L	A2,D6
	SUBQ.W	#3,D6
	MOVE.B	1(A2),D1
	MOVE.B	2(A2),D2
	MOVEQ	#0,D7
	MOVE.L	A1,D4
L511CC	MOVEA.L	D0,A3
	MOVEA.L	4(A3),A0
	ADDQ.L	#1,A0
	CMP.B	(A0)+,D1
	BNE.S	L51204
	CMP.B	(A0)+,D2
	BNE.S	L51204
	LEA	3(A2),A1
	MOVE.L	A2,D3
	SUB.L	A0,D3
	CMP.W	D6,D3
	BLE.S	L511EC
	MOVE.W	D6,D3
L511EC	SUBQ.W	#1,D3
	BMI.S	L51204
L511F0	MOVE.B	(A0)+,D0
	CMP.B	(A1)+,D0
	DBNE	D3,L511F0
	SUBA.L	A2,A1
	CMP.W	A1,D7
	BGE.S	L51204
	MOVE.W	A1,D7
	MOVE.L	4(A3),D5
L51204	MOVE.L	(A3),D0
	BNE.S	L511CC
	MOVEA.L	D4,A1
	MOVE.L	A1,(A3)
	CLR.L	(A1)+
	MOVE.L	A2,(A1)+
	TST.W	D7
	BEQ.S	L5123E
	SUBQ.W	#1,D7
	CMPI.W	#$3F,D7
	BLE.S	L51220
	MOVE.W	#$3F,D7
L51220	SUB.L	8(A6),D5
	ADDA.W	D7,A2
	MOVEA.L	A4,A5
	ADD.W	D7,D7
	BSET	#7,D7
	BTST	#8,D5
	BEQ.S	L51238
	BSET	#0,D7
L51238	MOVE.B	D7,(A4)+
	MOVE.B	D5,(A4)+
	BRA.S	L5124C
L5123E	CMPI.B	#$7F,(A5)
	BCS.S	L51248
	MOVEA.L	A4,A5
	CLR.B	(A4)+
L51248	ADDQ.B	#1,(A5)
	MOVE.B	(A2)+,(A4)+
L5124C	CMPA.L	$C(A6),A2
	BLT	L5119A
	MOVEA.L	$14(A6),A0
	SUBA.L	(A0),A4
	MOVE.L	A4,(A0)
	MOVEM.L	(A7)+,A4-A5
	MOVEM.L	(A7)+,D4-D7/A2-A3
	UNLK	A6
	RTS
L51268	LINK	A6,#-4
	MOVEM.L	D7/A2-A3,-(A7)
	MOVEA.L	$10(A6),A3
	MOVEA.L	8(A6),A2
	MOVEA.L	A2,A1
	BRA.S	L512AC
L5127C	MOVEQ	#0,D0
	MOVE.B	(A3)+,D0
	BCLR	#7,D0
	BNE.S	L51292
	SUBQ.W	#1,D0
	BMI.S	L512AC
L5128A	MOVE.B	(A3)+,(A2)+
	DBF	D0,L5128A
	BRA.S	L512AC
L51292	MOVEQ	#0,D1
	MOVE.B	(A3)+,D1
	LSR.B	#1,D0
	BCC.S	L5129E
	ADD.W	#$100,D1
L5129E	LEA	0(A1,D1.W),A0
	SUBQ.W	#1,D0
	BMI.S	L512AC
L512A6	MOVE.B	(A0)+,(A2)+
	DBF	D0,L512A6
L512AC	CMPA.L	$C(A6),A2
	BLT.S	L5127C
	MOVEM.L	(A7)+,D7/A2-A3
	UNLK	A6
	RTS
L512BC	LINK	A6,#0
	MOVE.W	8(A6),-(A7)
	JSR	L51680(PC)
	ADDQ.L	#2,A7
	CMPI.W	#$8300,8(A6)
	BGT.S	L512D8
	CLR.W	D0
	BRA.S	L512F6
L512D8	MOVE.W	8(A6),-(A7)
	MOVE.W	#$3E,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
	MOVE.W	D0,-$1C5E(A4)
	BEQ.S	L512F2
	MOVE.W	#$FFFF,D0
	BRA.S	L512F6
L512F2	MOVE.W	#0,D0
L512F6	UNLK	A6
	RTS
L512FA	LINK	A6,#0
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$4C,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
	UNLK	A6
	RTS
L51310	LINK	A6,#-2
	MOVE.L	A3,-(A7)
	LEA	-$1C10(A4),A0
	MOVEA.L	A0,A3
	BRA.S	L51334
L5131E	MOVE.W	$A(A3),D0
	AND.W	#3,D0
	BEQ.S	L51330
	MOVE.L	A3,-(A7)
	JSR	L51356(PC)
	ADDQ.L	#4,A7
L51330	ADDA.W	#$14,A3
L51334	MOVE.L	A3,D0
	LEA	-$1C10(A4),A0
	MOVE.L	A0,D1
	ADD.L	#$5B4,D1
	CMP.L	D1,D0
	BLT.S	L5131E
	MOVE.W	8(A6),-(A7)
	JSR	L512FA(PC)
	ADDQ.L	#2,A7
	MOVEA.L	(A7)+,A3
	UNLK	A6
	RTS
L51356	LINK	A6,#0
	MOVE.L	A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVE.L	A3,-(A7)
	JSR	L513A8(PC)
	ADDQ.L	#4,A7
	TST.W	D0
	BEQ.S	L51372
	MOVE.W	#$FFFF,D0
	BRA.S	L513A2
L51372	MOVE.W	$A(A3),D0
	AND.W	#$10,D0
	BEQ.S	L51386
	MOVE.L	6(A3),-(A7)
	JSR	L5166A(PC)
	ADDQ.L	#4,A7
L51386	CLR.W	$A(A3)
	MOVE.W	$C(A3),-(A7)
	JSR	L512BC(PC)
	ADDQ.L	#2,A7
	TST.W	D0
	BEQ.S	L5139E
	MOVE.W	#$FFFF,D0
	BRA.S	L513A2
L5139E	MOVE.W	#0,D0
L513A2	MOVEA.L	(A7)+,A3
	UNLK	A6
	RTS
L513A8	LINK	A6,#0
	MOVEM.L	D7/A3,-(A7)
	MOVEA.L	8(A6),A3
	MOVE.W	$A(A3),D0
	AND.W	#3,D0
	BNE.S	L513C6
	MOVE.W	#$FFFF,D0
	BRA	L5145C
L513C6	MOVE.L	(A3),D7
	SUB.L	6(A3),D7
	MOVE.W	$A(A3),D0
	AND.W	#$80,D0
	BEQ.S	L5142C
	MOVE.W	$A(A3),D0
	AND.W	#2,D0
	BNE.S	L513E6
	MOVE.W	#$FFFF,D0
	BRA.S	L5145C
L513E6	MOVE.W	$A(A3),D0
	AND.W	#4,D0
	BEQ.S	L51400
	MOVE.W	#2,-(A7)
	CLR.L	-(A7)
	MOVE.W	$C(A3),-(A7)
	JSR	L51542(PC)
	ADDQ.L	#8,A7
L51400	MOVE.W	D7,-(A7)
	MOVE.L	6(A3),-(A7)
	MOVE.W	$C(A3),-(A7)
	JSR	L517E4(PC)
	ADDQ.L	#8,A7
	CMPI.W	#$FFFF,D0
	BNE.S	L5141C
	MOVE.W	#$FFFF,D0
	BRA.S	L5145C
L5141C	ANDI.W	#$FF7F,$A(A3)
	MOVE.W	D7,D0
	EXT.L	D0
	ADD.L	D0,$E(A3)
	BRA.S	L51450
L5142C	TST.W	$C(A3)
	BLE.S	L51450
	MOVE.W	#1,-(A7)
	MOVE.W	4(A3),D0
	NEG.W	D0
	EXT.L	D0
	MOVE.L	D0,-(A7)
	MOVE.W	$C(A3),-(A7)
	JSR	L51542(PC)
	ADDQ.L	#8,A7
	MOVE.L	D0,$E(A3)
L51450	MOVE.L	6(A3),(A3)
	CLR.W	4(A3)
	MOVE.W	#0,D0
L5145C	MOVEM.L	(A7)+,D7/A3
	UNLK	A6
	RTS
L51464	LINK	A6,#-2
	MOVEM.L	D0-D3,-(A7)
	MOVE.L	8(A6),D2
	BNE.S	L5147C
	DIVU	#0,D0
	CLR.L	D0
	CLR.L	D1
	BRA.S	L514C6
L5147C	MOVE.L	$C(A6),D1
	CLR.W	-2(A6)
	TST.L	D1
	BGE.S	L5148E
	ADDQ.W	#3,-2(A6)
	NEG.L	D1
L5148E	TST.L	D2
	BGE.S	L51498
	ADDQ.W	#1,-2(A6)
	NEG.L	D2
L51498	MOVEQ	#1,D3
L5149A	CMP.L	D1,D2
	BCC.S	L514A4
	ASL.L	#1,D2
	ASL.L	#1,D3
	BRA.S	L5149A
L514A4	CLR.L	D0
L514A6	CMP.L	D1,D2
	BHI.S	L514AE
	OR.L	D3,D0
	SUB.L	D2,D1
L514AE	LSR.L	#1,D2
	LSR.L	#1,D3
	BCC.S	L514A6
	CMPI.W	#3,-2(A6)
	BLT.S	L514BE
	NEG.L	D1
L514BE	LSR	-2(A6)
	BCC.S	L514C6
	NEG.L	D0
L514C6	MOVE.L	D0,8(A6)
	MOVE.L	D1,$C(A6)
	MOVEM.L	(A7)+,D0-D3
	UNLK	A6
	RTS
L514D6	LINK	A6,#-6
	MOVE.L	D0,-(A7)
	CLR.W	-2(A6)
	TST.L	8(A6)
	BGE.S	L514EE
	ADDQ.W	#1,-2(A6)
	NEG.L	8(A6)
L514EE	TST.L	$C(A6)
	BGE.S	L514FC
	ADDQ.W	#1,-2(A6)
	NEG.L	$C(A6)
L514FC	MOVE.W	$A(A6),D0
	MULU	$E(A6),D0
	MOVE.L	D0,-6(A6)
	MOVE.W	8(A6),D0
	MULU	$E(A6),D0
	ADD.W	D0,-6(A6)
	MOVE.W	$A(A6),D0
	MULU	$C(A6),D0
	ADD.W	D0,-6(A6)
	ANDI.W	#1,-2(A6)
	BEQ.S	L5152C
	NEG.L	-6(A6)
L5152C	MOVE.L	(A7)+,D0
	MOVE.L	-6(A6),$C(A6)
	UNLK	A6
	MOVE.L	(A7)+,(A7)
	TST.L	4(A7)
	RTS
L51542	LINK	A6,#-$E
	TST.W	8(A6)
	BGE.S	L51558
	MOVE.L	#$FFFFFFFF,D0
	BRA	L51654
L51558	MOVE.W	$E(A6),-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.L	$A(A6),-(A7)
	MOVE.W	#$42,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$A,A7
	MOVE.L	D0,-4(A6)
	TST.L	D0
	BLT.S	L51584
	MOVE.L	-4(A6),D0
	BRA	L51654
L51584	MOVE.W	#1,-(A7)
	MOVE.W	8(A6),-(A7)
	CLR.L	-(A7)
	MOVE.W	#$42,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$A,A7
	MOVE.L	D0,-8(A6)
	MOVE.W	#2,-(A7)
	MOVE.W	8(A6),-(A7)
	CLR.L	-(A7)
	MOVE.W	#$42,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$A,A7
	MOVE.L	D0,-$C(A6)
	CMPI.W	#1,$E(A6)
	BNE.S	L515CE
	MOVE.L	-8(A6),D0
	ADD.L	$A(A6),D0
	MOVE.L	D0,$A(A6)
	BRA.S	L515F2
L515CE	CMPI.W	#2,$E(A6)
	BNE.S	L515E4
	MOVE.L	-$C(A6),D0
	ADD.L	$A(A6),D0
	MOVE.L	D0,$A(A6)
	BRA.S	L515F2
L515E4	MOVE.W	$E(A6),D0
	BEQ.S	L515F2
	MOVEQ.L	#$FF,D0
	BRA.S	L51654
L515F2	MOVE.L	$A(A6),D0
	CMP.L	-$C(A6),D0
	BLE.S	L5161A
	PEA	-$E(A6)
	MOVE.L	$A(A6),D0
	SUB.L	-$C(A6),D0
	MOVE.L	D0,-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$40,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
L5161A	CLR.W	-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.L	$A(A6),-(A7)
	MOVE.W	#$42,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$A,A7
	TST.L	D0
	SLT	D0
	AND.W	#1,D0
	MOVE.W	D0,-$1C5E(A4)
	BEQ.S	L5164C
	MOVEQ.L	#$FF,D0
	BRA.S	L51654
	BRA.S	L51654
L5164C	CLR.W	-$1C5E(A4)
	MOVE.L	$A(A6),D0
L51654	UNLK	A6
	RTS
L51658	
	MOVE.L	A1,-(A7)
L5165E	MOVE.W	(A1)+,(A0)+
	DBF	D0,L5165E
	MOVEA.L	(A7)+,A1
	
	RTS
L5166A	LINK	A6,#0
	MOVE.L	8(A6),-(A7)
	MOVE.W	#$49,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#6,A7
	UNLK	A6
	RTS
L51680	LINK	A6,#-2
	CLR.W	-2(A6)
	BRA.S	L516B0
L5168A	MOVE.W	-2(A6),D0
	ASL.L	#2,D0
	LEA	-$1D8E(A4),A0
	ADDA.W	D0,A0
	MOVE.W	(A0),D0
	CMP.W	8(A6),D0
	BNE.S	L516AC
	MOVE.W	-2(A6),D0
	ASL.L	#2,D0
	LEA	-$1D8E(A4),A0
	ADDA.W	D0,A0
	CLR.W	(A0)
L516AC	ADDQ.W	#1,-2(A6)
L516B0	CMPI.W	#$4C,-2(A6)
	BLT.S	L5168A
	UNLK	A6
	RTS
L516BC	LINK	A6,#-2
	MOVE.W	D7,-(A7)
	MOVE.W	8(A6),D7
	MOVE.W	#$130,-2(A6)
	LEA	-$1D8E(A4),A0
	MOVEA.L	A0,A1
	ADDA.W	-2(A6),A1
L516D6	CMP.W	(A0),D7
	BEQ.S	L516E0
	ADDQ.W	#4,A0
	CMPA.L	A0,A1
	BNE.S	L516D6
L516E0	MOVE.W	2(A0),D0
	MOVE.W	(A7)+,D7
	UNLK	A6
	RTS
CALL_BIOS	
	MOVE.L	A1,-$1D92(A4)
	MOVE.L	A2,-$1D96(A4)
	MOVE.L	(A7)+,-$1D9A(A4)
	TRAP	#13
	MOVEA.L	-$1D92(A4),A1
	MOVEA.L	-$1D96(A4),A2
	MOVE.L	-$1D9A(A4),-(A7)
	RTS
CALL_XBIOS	
	MOVE.L	A1,-$1D92(A4)
	MOVE.L	A2,-$1D96(A4)
	MOVE.L	(A7)+,-$1D9A(A4)
	TRAP	#14
	MOVEA.L	-$1D92(A4),A1
	MOVEA.L	-$1D96(A4),A2
	MOVE.L	-$1D9A(A4),-(A7)
	RTS
CALL_GEMDOS	MOVE.L	A1,-$1D92(A4)
	MOVE.L	A2,-$1D96(A4)
	MOVE.L	(A7)+,-$1D9A(A4)
	TRAP	#1
	MOVEA.L	-$1D92(A4),A1
	MOVEA.L	-$1D96(A4),A2
	MOVE.L	-$1D9A(A4),-(A7)
	RTS
L5173E	LINK	A6,#0
	BRA.S	L51778
L51744	MOVEA.L	8(A6),A0
	MOVE.B	(A0),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BNE.S	L51760
	MOVE.W	#$D,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L51760	MOVEA.L	8(A6),A0
	ADDQ.L	#1,8(A6)
	MOVE.B	(A0),D0
	EXT.W	D0
	MOVE.W	D0,-(A7)
	MOVE.W	#2,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L51778	MOVE.W	$C(A6),D0
	SUBQ.W	#1,$C(A6)
	TST.W	D0
	BNE.S	L51744
	UNLK	A6
	RTS
L51788	LINK	A6,#0
	BRA.S	L517A6
L5178E	MOVEA.L	8(A6),A0
	ADDQ.L	#1,8(A6)
	MOVE.B	(A0),D0
	EXT.W	D0
	MOVE.W	D0,-(A7)
	MOVE.W	#4,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L517A6	MOVE.W	$C(A6),D0
	SUBQ.W	#1,$C(A6)
	TST.W	D0
	BNE.S	L5178E
	UNLK	A6
	RTS
L517B6	LINK	A6,#0
	BRA.S	L517D4
L517BC	MOVEA.L	8(A6),A0
	ADDQ.L	#1,8(A6)
	MOVE.B	(A0),D0
	EXT.W	D0
	MOVE.W	D0,-(A7)
	MOVE.W	#5,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDQ.L	#4,A7
L517D4	MOVE.W	$C(A6),D0
	SUBQ.W	#1,$C(A6)
	TST.W	D0
	BNE.S	L517BC
	UNLK	A6
	RTS
L517E4	LINK	A6,#-$E
	MOVEM.L	A2-A3,-(A7)
	MOVEA.L	$A(A6),A3
	MOVEA.L	A3,A2
	LEA	$1A2(A4),A0
	MOVE.L	A0,-$A(A6)
	CMPI.W	#$8300,8(A6)
	BNE.S	L51818
	MOVE.W	$E(A6),-(A7)
	MOVE.L	A3,-(A7)
	JSR	L5173E(PC)
	ADDQ.L	#6,A7
	MOVE.W	$E(A6),-2(A6)
	BRA	L51962
L51818	CMPI.W	#$82FF,8(A6)
	BNE.S	L51836
	MOVE.W	$E(A6),-(A7)
	MOVE.L	A3,-(A7)
	JSR	L51788(PC)
	ADDQ.L	#6,A7
	MOVE.W	$E(A6),-2(A6)
	BRA	L51962
L51836	CMPI.W	#$82FE,8(A6)
	BNE.S	L51854
	MOVE.W	$E(A6),-(A7)
	MOVE.L	A3,-(A7)
	JSR	L517B6(PC)
	ADDQ.L	#6,A7
	MOVE.W	$E(A6),-2(A6)
	BRA	L51962
L51854	MOVE.L	A3,-6(A6)
	CLR.W	-2(A6)
	MOVE.W	8(A6),-(A7)
	JSR	L516BC(PC)
	ADDQ.L	#2,A7
	TST.W	D0
	BNE	L51910
	BRA	L51902
L51870	MOVE.B	(A2),D0
	EXT.W	D0
	CMP.W	#$A,D0
	BNE	L51900
	MOVE.L	A2,D0
	SUB.L	-6(A6),D0
	TST.W	D0
	BLE.S	L518C8
	MOVE.L	A2,D0
	SUB.L	-6(A6),D0
	EXT.L	D0
	MOVE.L	D0,-$E(A6)
	MOVE.L	-6(A6),-(A7)
	MOVE.L	-$E(A6),-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$40,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
	MOVE.W	D0,-$1C5E(A4)
	EXT.L	D0
	CMP.L	-$E(A6),D0
	BEQ.S	L518C0
	MOVE.W	#$FFFF,D0
	BRA	L51966
L518C0	MOVE.W	-$1C5E(A4),D0
	ADD.W	D0,-2(A6)
L518C8	MOVE.L	-$A(A6),-(A7)
	MOVE.L	#2,-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$40,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
	MOVE.W	D0,-$1C5E(A4)
	CMPI.W	#2,D0
	BEQ.S	L518F2
	MOVE.W	#$FFFF,D0
	BRA.S	L51966
L518F2	ADDQ.W	#1,-2(A6)
	ADDQ.L	#1,A2
	MOVE.L	A2,D0
	MOVE.L	D0,-6(A6)
	BRA.S	L51902
L51900	ADDQ.L	#1,A2
L51902	MOVE.L	A2,D0
	SUB.L	A3,D0
	CMP.W	$E(A6),D0
	BCS	L51870
	BRA.S	L51920
L51910	MOVE.L	A3,D0
	MOVE.W	$E(A6),D3
	AND.L	#$FFFF,D3
	ADD.L	D3,D0
	MOVEA.L	D0,A2
L51920	MOVE.L	A2,D0
	SUB.L	-6(A6),D0
	EXT.L	D0
	MOVE.L	D0,-$E(A6)
	MOVE.L	-6(A6),-(A7)
	MOVE.L	-$E(A6),-(A7)
	MOVE.W	8(A6),-(A7)
	MOVE.W	#$40,-(A7)
	JSR	CALL_GEMDOS(PC)
	ADDA.W	#$C,A7
	MOVE.W	D0,-$1C5E(A4)
	EXT.L	D0
	CMP.L	-$E(A6),D0
	BEQ.S	L51956
	MOVE.W	#$FFFF,D0
	BRA.S	L51966
L51956	MOVE.W	-$1C5E(A4),D0
	ADD.W	D0,-2(A6)
	CLR.W	-$1C5E(A4)
L51962	MOVE.W	-2(A6),D0
L51966	MOVEM.L	(A7)+,A2-A3
	UNLK	A6
	RTS
VARIABLES	
	LEA	-$24A(A4),A1		BIOS PARAMETER BLOCK OF DISK
RECSIZ	MOVE.W	#$200,(A1)+		BYTES PER SECTOR	
CLSIZ	MOVE.W	#2,(A1)+		2 SECTORS PER CLUSTER
CLSIZB	MOVE.W	#$400,(A1)+		BYTES PER CLUSTER
RDLEN	MOVE.W	#5,(A1)+		5 SECTORS FOR DIRECTORY
FSIZ	MOVE.W	#4,(A1)+		4 SECTORS PER FAT
FETREC	MOVE.W	#5,(A1)+		5 SECTOR No. OF 2nd FAT
DATREC	MOVE.W	#$E,(A1)+		E SECTOR No. OF FIRST DATA CLUSTER
NUMCL	CLR.W	(A1)+			No. of CLUSTERS 
BFLAGS	MOVE.W	#1,(A1)+		BIOS FLAGS
	LEA	-$1C10(A4),A1
	CLR.L	(A1)+
	CLR.W	(A1)+
	CLR.L	(A1)+
	MOVE.W	#9,(A1)+
	MOVE.W	#$8300,(A1)+
	CLR.L	(A1)+
	CLR.W	(A1)+
	CLR.L	(A1)+
	CLR.W	(A1)+
	CLR.L	(A1)+
	MOVE.W	#$102,(A1)+
	MOVE.W	#$8300,(A1)+
	CLR.L	(A1)+
	MOVE.W	#$200,(A1)+
	CLR.L	(A1)+
	CLR.W	(A1)+
	CLR.L	(A1)+
	MOVE.W	#$102,(A1)+
	MOVE.W	#$8300,(A1)+
	CLR.L	(A1)+
	MOVE.W	#$200,(A1)+
	ADDA.W	#$578,A1
	MOVE.W	#$200,-$1C12(A4)
	RTS

* FOR BUDDING ASSEMBLERS OUT THERE - DO NOT ALTER ANYTHING BELOW HERE
* THE DATA AREAS ARE ACCESSED BY OFFSETS FROM A REGISTER *NOT* BY LABELS
	section data
	EVEN
MEMERROR
	dc.b	'Sorry not enough Free Memory for Maxi.',$0D,$0A,$00,$00
MAX_INF
	dc.b	'MAXIDISK.INF',$00,$00
CRLF
	dc.b	$0D,$0A,$00,$00
TAB
	dc.b	$08,' ',$08,$00
	dc.b	$0D,$0A,$00,$00
MEM_FREE
	dc.b	'Free Memory is  : ',$00,$00
BYTES
	dc.b	' Bytes',$0D,$0A,$0D,$0A,$00,$00

TITLE
	dc.b	$1B,'E',$1B,'e',$1B,'v',$1B,'p ~~~ Public domain software'
	dc.b	' ~~~                      (C) Max B',$94,'hm    16.05.1987 ',$1B
	dc.b	'q',$0D,$0A,'This is a Reset -  Proof Ramdisk ',$0D,$0A,'Feat'
	dc.b	'uring Automatic Data Compression.       ',$0D,$0A,$0D,$0A,$00
					  
INSTAL
	dc.b	'Installing as Disk Drive ',$00
WITH	dc.b	' with',$00
KBYTE	dc.b	' Kbyte',$0D,$0A,$0D,$0A,$00,$00

NEW_REQUEST
	dc.b	$0D,$0A,$00,$00
	dc.b	$1B,'ASize in Kbytes  :     ',$08,$08,$08,$08,$00,$00

	dc.b	$0D,$0A,$00,$00
	dc.b	$1B,'ADrive Identifier:  ',$08,$00,$00

ERROR
	dc.b	'Open Error : ',$00
	dc.b	$0D,$0A,$00,$00

	dc.b	'CON:',$00,$00
	dc.b	'AUX:',$00,$00
	dc.b	'PRT:',$00,$00
	dc.b	$0D,$0A,$00,$00

	section bss
	EVEN
H1D78:
	ds.b	$1D9A
	end
	