* DRIVE FX DEMO BY THE TITAN OF SPLIT INFINITY.....
* MUSIC BY MAD MAX



	DC.W $A00A

	CLR.L -(SP)     ;SV MODE
	MOVE.W #$20,-(SP)
	TRAP #1
	ADDQ.L #6,SP
	MOVE.L D0,STACK
	MOVE.L USP,A0
	MOVE.L A0,USTACK



	MOVE.W #5,-(SP)
	MOVE.W #26,-(SP)
	TRAP #14
	ADDQ.L #4,SP


	PEA MOUSE
	MOVE.W #1,-(SP)
	MOVE.W #25,-(SP)
	TRAP #14
	ADDQ.L #8,SP


	MOVEQ #2,D0	*SETUP MUSIC
	JSR MUSIC


	MOVE.W #$2700,SR
	MOVE.L $70,OVBL
	MOVE.L #VBL,$70
	MOVE.W #$2300,SR



DEADLOP:
	CMP.B #0,(FLAG)
	BEQ DEADLOP
	MOVE.B #0,(FLAG)

	CMP.B #$39,$FFFC02
	BNE DEADLOP



EXIT:
	MOVE.W #$2700,SR
	MOVE.L OVBL,$70
	MOVE.W #$2300,SR


	MOVE.W #5,-(SP)
	MOVE.W #27,-(SP)
	TRAP #14
	ADDQ.L #4,SP


	MOVE.L #$8080000,$FF8800	*TURN ALL SOUND OFF
	MOVE.L #$9090000,$FF8800
	MOVE.L #$A0A0000,$FF8800

	PEA MOUSE+2
	MOVE.W #1,-(SP)
	MOVE.W #25,-(SP)
	TRAP #14
	ADDQ.L #8,SP


	MOVE.L USTACK,A0
	MOVE.L A0,USP
	MOVE.L STACK,-(SP)
	MOVE.W #$20,-(SP)
	TRAP #1
	ADDQ.L #6,SP

	MOVE.W #0,-(SP)
	TRAP #1


COPY:
        MOVE.L (A0)+,(A1)+
        DBRA D0,COPY
        RTS


VBL:
* THE DRIVE FX CODE

	MOVE.B #7,$FF8800
	BTST #3,$FF8800
	BNE LOFF

	MOVE.B #$E,$FFFF8800.W
	MOVE.B #$4,$FFFF8802.W
	BRA LREST

LOFF	MOVE.B #$E,$FFFF8800.W
	MOVE.B #$3,$FFFF8802.W
LREST:


* PLAY THE MUSIX....
	JSR MUSIC+8


	MOVE.B #1,(FLAG)
        RTE
 
*************** DATA IN DE AREA (THE REVENGE OF!!!) *************
FLAG:	DC.B 0
	EVEN
SCR:	EQU $78000

STACK:	DC.L 0
USTACK:	DC.L 0

OVBL:
        DC.L 0

MOUSE:
        DC.B $12,$1A,$14,8
        EVEN
SYSPAL:	DC.W $777,$700,$070,$000,$007,$707,$007,$555
	DC.W $333,$733,$373,$773,$337,$737,$377,$000

MUSIC:	INCBIN MAX.MUZ
	EVEN

 END
