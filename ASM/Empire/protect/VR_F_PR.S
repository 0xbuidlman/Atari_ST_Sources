*INCBIN UN PRG
TRACK	EQU    79
BEGIN	MOVEM.L D0-A6,-(A7)
	PEA SUPEX
	MOVE.W #$26,-(A7)
	TRAP #14
	ADDQ.W #6,A7
	MOVEM.L (A7)+,D0-A6
	LEA GAME_PRG(PC),A0
	MOVE.L #END_PRG-GAME_PRG-$1C,D6
	LEA	BEGIN(PC),A1
	MOVE.L A1,D0
	LEA $1C(A0),A1
	MOVE.L A1,A2
	ADD.L 2(A0),A1
	ADD.L 6(A0),A1
	ADD.L $14(A0),A1
	MOVEQ #0,D1
	TST.L (A1)
	BEQ.S END_RELOGE
	ADD.L (A1)+,A2
RELOGE
	ADD.L D0,(A2)
CONT_REL
	MOVE.B (A1)+,D1
	BEQ.S END_RELOGE
	CMP.B #1,D1
	BNE.S ADD_REL
	LEA $FE(A2),A2
	BRA.S CONT_REL
ADD_REL
	ADD.L D1,A2
	BRA.S RELOGE
END_RELOGE
	LEA BEGIN-256(PC),A1
	MOVE.L 2(A0),A2
	MOVE.L A2,12(A1)
	ADD.L  A0,A2
	MOVE.L A2,16(A1)
	MOVE.L 6(A0),D0
	ADD.L D0,A2
	MOVE.L D0,$14(A1)
	MOVE.L A2,$18(A1)
	MOVE.L $14(A0),D0
	MOVE.L D0,$1C(A1)
	LEA $1C(A0),A3
	LEA BEGIN(PC),A4
	MOVE.L A4,A2
	LEA END_MINI(PC),A0
	MOVEQ #(END_MINI-MINI)/2-1,D7
.COPY
	MOVE.W -(A0),-(A7)
	DBRA D7,.COPY
	JMP (A7)
MINI
	MOVE.B (A3)+,(A4)+
	SUBQ.L #1,D6
	BNE.S MINI
	LEA MINI(PC),A0
.CLEAR	CLR.B (A3)+
	CMP.L A0,A3
	BNE.S .CLEAR
	LEA END_MINI(PC),A7
	JMP (A2)
END_MINI
GAME_PRG
	INCBIN C:\*.APP
END_PRG
	EVEN
SUPEX
	MOVE.L #$0E0E0505,$FFFF8800.W
	ST $43E.W
	MOVEQ #1,D1
	MOVE.W #$8604,A0
	BSR SEEK
	BSR SET
	BSR RT
	BSR CHK
	BSR RST
	SF $43E.W
	MOVE.L #$0E0E0707,$FFFF8800.W
	RTS
SET
	LEA BUFFER(PC),A1
	MOVE.W #$90,2(A0)
	MOVE.W #$190,2(A0)
	MOVE.W #$90,2(A0)
	MOVE.W #$1F,(A0)
	EXG A1,D7
	MOVE.B D7,9(A0)
	LSR.L #8,D7		
	MOVE.B D7,7(A0)		
	LSR.L #8,D7		
	MOVE.B D7,5(A0)
	RTS
CHK
	LEA BUFFER(PC),A1
CL	CMP.B #$7F,(A1)
	BEQ.S .END
	CMP.B #$A1,(A1)+
	BEQ.S .NO
	BRA.S CL
.END
	ADDQ.W #1,A1
	MOVE.B (A1)+,D7
	LSL.L #8,D7
	MOVE.B (A1)+,D7
	LSL.L #8,D7
	MOVE.B (A1)+,D7
	LSL.L #8,D7
	MOVE.B (A1)+,D7
;	CMP.L #$C24F03C8,D7	; RAP
;	CMP.L #$91980190,D7	; LGT
;	CMP.L #$91921813,D7	; LIGHTMAN
	CMP.L #$C2000E08,D7	; SUCK MY DICK
	BNE.S .NO
	RTS
.NO
	NOP
	MOVE.W	#$2700,SR
	NOP
	BEQ.S	RT
	NOP
	BRA.S .NO
	DC.W	$4AFC
	DC.W	$6001
RT
	MOVE.W #$80,2(A0)
	DIVU D1,D1
	MOVE.W #$E0,(A0)
	DIVU D1,D1
	BSR FDCW
	RTS
RST
	MOVE.W #$80,2(A0)
	DIVU D1,D1
	MOVE.W  #3,(A0)
	DIVU D1,D1
	BSR FDCW
	RTS
SEEK
	MOVE.W #$86,2(A0)
	DIVU D1,D1
	MOVE.W #TRACK,(A0)
	DIVU D1,D1
	MOVE.W #$80,2(A0)
	DIVU D1,D1
	MOVE.W #$13,(A0)
	DIVU D1,D1
	BSR FDCW
	RTS
FDCW
	MOVE.L #$80000,D7
.1
	BTST #5,$FFFFFA01.W
	BEQ.S .END
	SUBQ.L #1,D7
	BNE.S .1
.END
	RTS
BUFFER
	
	
	