head	1.2;
access;
symbols;
locks
	ersmith:1.2;
comment	@# @;


1.2
date	93.03.08.20.07.02;	author ersmith;	state Exp;
branches;
next	1.1;

1.1
date	93.02.24.23.52.46;	author ersmith;	state Exp;
branches;
next	1.0;

1.0
date	93.02.03.21.26.46;	author ersmith;	state Exp;
branches;
next	;


desc
@Makefile for MultiTOS
@


1.2
log
@REAL MultiTOS 1.01
@
text
@#### Makefile for MultiTOS			8/4/92
##
## ttaes & desktop *.c *.h *.s must be in current directory,
## along with appropriate glue.XXX files.

PATH=i:\bin,c:\mint\bin

## Files that depend on the country switches are all dependent
## on the makefile, so you don't need to go deleting a bunch
## of objects every time you make a new country.

#### Country definitions

C = usa

##
#### Default actions:
##
# 	The TAB space indicates the following line is a SHELL command 

.SUFFIXES: .oo .o .s .c

.c.o:
	cp68 $*.c m:\$*.i
	c068 m:\$*.i m:\$*.1 m:\$*.2 m:\$*.3 -f
	c168 m:\$*.1 m:\$*.2 m:\$*.s
	mac -6 m:\$*.s
	rm -f m:\$*.s m:\$*.i m:\$*.1 m:\$*.2 m:\$*.3
	mv m:\$*.o .\$*.o

.c.oo:
	cp68 $*.c m:\$*.i
	c068 m:\$*.i m:\$*.1 m:\$*.2 m:\$*.3 -f
	c168 m:\$*.1 m:\$*.2 m:\$*.s
	optimize m:\$*.s
	mac -6 m:\$*.s
	rm -f m:\$*.s m:\$*.i m:\$*.1 m:\$*.2 m:\$*.3 $*.oo
	mv m:\$*.o .\$*.oo

.s.o:
	mas -us $*.s
##
#### Default dependencies & object equates
##

STDESK.H =	portab.h deskobde.h deskdefi.h deskwin.h deskusa.h
STGEM.H =	compiler.h machine.h gemusa.h
GEMPD.H =	pdstruct.h dispvars.h
GEMOLIB.H =	obdefs.h gemlib.h

AB = 		gemctrl.oo ctrlbind.oo mn_event.oo mn_mbar.oo mn_popup.oo\
		mn_tools.oo mn_index.oo mn_menu.oo mn_submn.oo

STARTUP =	gemstart.o

AESOBJ =	gemaints.oo gemaplib.oo gemasync.oo gembase.oo gemcli.oo\
		gemdisp.o gemevlib.oo gemflag.oo gemfmalt.oo gemfmlib.oo\
		gemfslib.oo geminit.oo gemsignal.oo gemmnlib.oo gemobed.oo\
		gemobjop.oo gempd.oo gemqueue.oo gemrlist.oo gemrom.oo\
		gemrslib.oo gemsclib.oo gemshlib.oo gemtcpip.oo gemwmlib.oo romcart.oo\
		apgrlib.oo apgsxif.oo gembind.oo gemgrlib.oo gemgsxif.oo\
		gemoblib.oo gsx2.o aestrap.o aesdispa.o dosbind.oo large.o\
		utility.oo interrup.o traps.o

DESKOBJ = 	deskstart.o deskact.o deskapp.o deskvdi.o deskbutt.o \
		deskdir.o deskdisk.o deskfile.o deskinf.o deskins.o \
		deskmem.o deskmenu.o deskmisc.o deskmn.o deskopen.o \
		deskpref.o desksele.o deskshel.o deskshow.o deskvari.o\
		desktop.o deskupda.o deskwin.o desksear.o aesbin73 nosbind.o\
		kballoc.o
##
#### Actions
##

## -l generates too many symbols, so we use -s instead
##		aln -w -l -k gemstart -q -o $@@

gem.sys:	$(STARTUP) $(AESOBJ) ab.o $(DESKOBJ) glue.$(C)
		aln -u -s -o gem.sys $(STARTUP) $(AESOBJ) ab.o $(DESKOBJ)\
		-i glue.$(C) _USARSC
		prgflags 7 7 gem.sys
		@@echo 'gem.sys made.'

ab.o:	$(AB)
		aln -u -u -q -k _iscrmgr -k _mn_hdo -k _mn_popup\
		-k _mn_attach -k _mn_istart -k _mn_settings\
		-k _mn_free -k _mn_new -k _mn_init -k _ArrowScroll\
		-k _PushArrowTe -o ab.o $(AB)

##
#### Desktop dependencies
##
deskact.o:	$(STDESK.H)
deskapp.o:	$(STDESK.H)
deskbutt.o:	$(STDESK.H)
deskdir.o:	$(STDESK.H) error.h osbind.h 
deskdisk.o:	$(STDESK.H) 
deskfile.o: 	$(STDESK.H) osbind.h
deskinf.o:	$(STDESK.H)
deskins.o:	$(STDESK.H) osbind.h
deskmem.o:	$(STDESK.H) extern.h	 
deskmenu.o: 	$(STDESK.H) mintbind.h
deskmisc.o:	$(STDESK.H) 
deskmn.o:	$(STDESK.H) vdomode.h 
deskopen.o:	$(STDESK.H)
deskpref.o:	$(STDESK.H) osbind.h
desksear.o:	$(STDESK.H) 
desksele.o: 	$(STDESK.H)
deskshel.o:	$(STDESK.H)
deskshow.o:	$(STDESK.H)
desktop.o:	$(STDESK.H) osbind.h extern.h mintbind.h signal.h 
deskupda.o:	$(STDESK.H) 
deskvari.o:	$(STDESK.H) osbind.h
deskvdi.o:	portab.h vdidefs.h
deskwin.o:	$(STDESK.H) osbind.h 

##
### AES dependencies
##
apgrlib.oo:  $(STGEM.H) obdefs.h vdidefs.h
apgsxif.oo:  $(STGEM.H) obdefs.h vdidefs.h aesmint.h
gemaints.oo: $(STGEM.H) $(GEMPD.H)
gemaplib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) dispvars.h aesmint.h signal.h
gemasync.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gembase.oo:  $(STGEM.H) $(GEMPD.H)
gembind.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h crysbind.h aesmint.h		
gemcli.oo:   $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h   
gemctrl.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h aesmint.h
gemdisp.o:   $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h signal.h
gemevlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h   
gemflag.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h   
gemfmalt.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h aesmint.h
gemfmlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h objaddr.h
gemfslib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) gemdos.h objaddr.h
gemgrlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemgsxif.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) vdidefs.h aesmint.h
geminit.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h aesmint.h signal.h gemusa.h 	
gemmnlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h aesmint.h signal.h
gemobed.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h
gemobjop.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h vdidefs.h
gemoblib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h 
gempd.oo:    $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemqueue.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemrlist.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemrom.oo:   $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h aesmint.h
gemrslib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h 
gemsigna.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemsclib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H)
gemshlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h gemdos.h aesmint.h signal.h
gemtcpip.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
gemwmlib.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) aesmint.h
mn_event.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_mbar.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_popup.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_tools.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_index.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_menu.oo:  $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
mn_submn.oo: $(STGEM.H) $(GEMPD.H) $(GEMOLIB.H) objaddr.h osbind.h mn_tools.h
dosbind.oo:  gemdos.h
romcart.oo:  $(STGEM.H) $(GEMPD.H) gemdos.h
utility.oo:  $(STGEM.H) objaddr.h obdefs.h
ctrlbind.oo: portab.h crysbind.h obdefs.h    
@


1.1
log
@1 meg floppy MultiTOS
@
text
@@


1.0
log
@MultiTOS version 1.0
@
text
@d14 1
a14 1
COUNTRY = usa
a15 6
## NOTE: When making UK AES, set COUNTRY to usa and CDEF to UK.
##       This will build a ttaesusa.o which must then be manually
##	 renamed to ttaesuk.o.
##	The same goes for SWISSGER and SWISSFRA -- use grm and fre,
##	and manually rename the ttaesxxx.o file that gets built.

d46 1
a46 1
STDESK.H =	portab.h deskobde.h deskdefi.h deskwin.h desk$(COUNTRY).h
a50 7
RSC1 =		glue.usa
RSC2 =		glue.grm 
RSC3 =		glue.fre
RSC4 =		glue.ita 
#RSC5 =		glue.swe
RSC6 = 		glue.spa

d69 2
a70 2
		desktop.o deskupda.o deskwin.o desksear.o aesbin73 nosbind.o 

d78 7
a84 2
gem.sys:	$(STARTUP) $(AB) $(AESOBJ) $(DESKOBJ) $(RSC1) $(RSC2) $(RSC3)\
		$(RSC4) $(RSC5) $(RSC6)
a89 7
		aln -u -s -o gem.sys $(STARTUP) $(AESOBJ) ab.o $(DESKOBJ)\
		-i $(RSC1) _USARSC -i $(RSC2) _GRMRSC -i $(RSC3) _FRERSC\
		-i $(RSC4) _ITARSC -i $(RSC6) _SPARSC

		prgflags 7 7 gem.sys
#		copy gem.sys c:\gem.sys				
		@@echo 'gem.sys made.'
@
